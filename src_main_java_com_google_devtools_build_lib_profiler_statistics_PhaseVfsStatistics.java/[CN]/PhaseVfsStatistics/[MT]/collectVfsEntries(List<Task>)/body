{
  EnumMap<ProfilerTask,Map<String,Stat>> stats=Maps.newEnumMap(ProfilerTask.class);
  for (  Task task : taskList) {
    collectVfsEntries(Arrays.asList(task.subtasks));
    if (!task.type.name().startsWith("VFS_")) {
      continue;
    }
    Map<String,Stat> statsForType=stats.get(task.type);
    if (statsForType == null) {
      statsForType=new HashMap<>();
      stats.put(task.type,statsForType);
    }
    String path=currentPathMapping(task.getDescription());
    Stat stat=statsForType.get(path);
    if (stat == null) {
      stat=new Stat();
    }
    stat.duration+=task.durationNanos;
    stat.count++;
    statsForType.put(path,stat);
  }
  for (  ProfilerTask type : stats.keySet()) {
    Map<String,Stat> statsForType=stats.get(type);
    TreeMultimap<Stat,String> sortedStats=TreeMultimap.create(Ordering.natural().reverse(),Ordering.natural());
    Multimaps.invertFrom(Multimaps.forMap(statsForType),sortedStats);
    sortedStatistics.put(type,sortedStats);
  }
}
