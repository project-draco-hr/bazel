{
  if (attributes.getProtoFiles().isEmpty()) {
    ruleContext.ruleError(NO_PROTOS_ERROR);
  }
  if (attributes.usesProtobufLibrary()) {
    if (attributes.getPortableProtoFilters().isEmpty()) {
      ruleContext.ruleError(PORTABLE_PROTO_FILTERS_EMPTY_ERROR);
    }
    if (attributes.outputsCpp() || attributes.usesObjcHeaderNames() || attributes.needsPerProtoIncludes()|| attributes.getOptionsFile() != null) {
      ruleContext.ruleError(PORTABLE_PROTO_FILTERS_NOT_EXCLUSIVE_ERROR);
    }
  }
  return this;
}
