{
  if (attributes.getProtoFiles().isEmpty()) {
    ruleContext.ruleError(NO_PROTOS_ERROR);
  }
  if (usesProtobufLibrary()) {
    if (attributes.getPortableProtoFilters().isEmpty()) {
      ruleContext.ruleError(PORTABLE_PROTO_FILTERS_EMPTY_ERROR);
    }
    if (attributes.outputsCpp() || attributes.usesObjcHeaderNames() || attributes.needsPerProtoIncludes()|| attributes.getOptionsFile() != null) {
      ruleContext.ruleError(PORTABLE_PROTO_FILTERS_NOT_EXCLUSIVE_ERROR);
    }
  }
 else {
    if (attributes.outputsCpp()) {
      ruleContext.ruleWarning("The output_cpp attribute has been deprecated. Please " + "refer to b/29342376 for information on possible alternatives.");
    }
    if (!attributes.usesObjcHeaderNames()) {
      ruleContext.ruleWarning("As part of the migration process, it is recommended to enable " + "use_objc_header_names. Please refer to b/29368416 for more information.");
    }
  }
  return this;
}
