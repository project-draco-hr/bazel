{
  ImmutableList.Builder<Artifact> builder=new ImmutableList.Builder<>();
  for (  Artifact protoFile : attributes.getProtoFiles()) {
    String generatedOutputName;
    if (attributes.outputsCpp()) {
      generatedOutputName=protoFile.getFilename();
    }
 else {
      String lowerUnderscoreBaseName=protoFile.getFilename().replace('-','_').toLowerCase();
      generatedOutputName=LOWER_UNDERSCORE.to(UPPER_CAMEL,lowerUnderscoreBaseName);
    }
    PathFragment generatedFilePath=new PathFragment(protoFile.getRootRelativePath().getParentDirectory(),new PathFragment(generatedOutputName));
    PathFragment outputFile=FileSystemUtils.replaceExtension(generatedFilePath,newFileType.getExtensions().get(0),".proto");
    if (outputFile != null) {
      builder.add(ruleContext.getUniqueDirectoryArtifact(UNIQUE_DIRECTORY_NAME,outputFile,ruleContext.getBinOrGenfilesDirectory()));
    }
  }
  return builder.build();
}
