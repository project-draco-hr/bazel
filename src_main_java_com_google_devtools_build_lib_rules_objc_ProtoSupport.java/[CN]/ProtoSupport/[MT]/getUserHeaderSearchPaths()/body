{
  PathFragment workspaceRelativeOutputDir=getWorkspaceRelativeOutputDir();
  ImmutableSet.Builder<PathFragment> searchPathEntriesBuilder=new ImmutableSet.Builder<PathFragment>().add(workspaceRelativeOutputDir);
  if (attributes.needsPerProtoIncludes()) {
    PathFragment generatedProtoDir=new PathFragment(workspaceRelativeOutputDir,ruleContext.getLabel().getPackageFragment());
    searchPathEntriesBuilder.add(generatedProtoDir).addAll(Iterables.transform(getGeneratedHeaders(),PARENT_PATHFRAGMENT));
  }
  return searchPathEntriesBuilder.build();
}
