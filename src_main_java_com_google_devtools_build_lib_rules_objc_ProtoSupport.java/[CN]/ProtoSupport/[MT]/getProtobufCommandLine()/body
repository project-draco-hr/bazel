{
  CustomCommandLine.Builder commandLineBuilder=new CustomCommandLine.Builder().add(attributes.getProtoCompiler().getExecPathString()).add("--input-file-list").add(getProtoInputListFile().getExecPathString()).add("--output-dir").add(getWorkspaceRelativeOutputDir().getSafePathString()).add("--force").add("--proto-root-dir").add(".");
  boolean configAdded=false;
  for (  Artifact portableProtoFilter : attributes.getPortableProtoFilters()) {
    String configFlag;
    if (!configAdded) {
      configFlag="--config";
      configAdded=true;
    }
 else {
      configFlag="--extra-filter-config";
    }
    commandLineBuilder.add(configFlag).add(portableProtoFilter.getExecPathString());
  }
  return commandLineBuilder.build();
}
