{
  CustomCommandLine.Builder commandLineBuilder=new CustomCommandLine.Builder().add(attributes.getProtoCompiler().getExecPathString()).add("--input-file-list").add(getProtoInputListFile().getExecPathString()).add("--output-dir").add(getWorkspaceRelativeOutputDir().getSafePathString()).add("--working-dir").add(".");
  if (attributes.getOptionsFile() != null) {
    commandLineBuilder.add("--compiler-options-path").add(attributes.getOptionsFile().getExecPathString());
  }
  if (attributes.outputsCpp()) {
    commandLineBuilder.add("--generate-cpp");
  }
  if (attributes.usesObjcHeaderNames()) {
    commandLineBuilder.add("--use-objc-header-names");
  }
  return commandLineBuilder.build();
}
