{
  NestedSetBuilder<Artifact> protos=NestedSetBuilder.stableOrder();
  if (targetType == TargetType.LINKING_TARGET) {
    Iterable<ObjcProtoProvider> objcProtoPrividers=attributes.getDepsObjcProtoPrerequisites();
    for (    ObjcProtoProvider objcProtoProvider : objcProtoPrividers) {
      protos.addTransitive(objcProtoProvider.getProtoSources());
    }
  }
  protos.addTransitive(attributes.getProtoFiles());
  return protos.build();
}
