{
  SkyframeTargetPatternEvaluator patternEvaluator=(SkyframeTargetPatternEvaluator)packageManager.getTargetPatternEvaluator();
  String offset=patternEvaluator.getOffset();
  SkyKey skyKey=PrepareDepsOfPatternsValue.key(ImmutableList.copyOf(patterns),offset);
  EvaluationResult<SkyValue> evaluationResult=buildDriver.evaluate(ImmutableList.of(skyKey),true,numThreads,eventHandler);
  Preconditions.checkNotNull(evaluationResult.getWalkableGraph(),patterns);
  return evaluationResult;
}
