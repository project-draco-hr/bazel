{
  if (isShutdown) {
    throw new IllegalStateException("Received request after shutdown.");
  }
  String command=Iterables.getFirst(request,"");
  if (appCommand != null && command.equals("blaze")) {
    int result=appCommand.exec(request.subList(1,request.size()),outErr,firstContactTime);
    if (appCommand.shutdown()) {
      shutdown();
    }
    return result;
  }
 else {
    throw new UnknownCommandException(command);
  }
}
