{
  if (fragment == null) {
    return;
  }
  ListMultimap<String,Label> implicitLabels=fragment.getImplicitLabels();
  if (implicitLabels.isEmpty()) {
    return;
  }
  Set<Label> reachableLabels=new HashSet<>();
  for (  Label root : fragment.getSanityCheckRoots()) {
    try {
      collectAllTransitiveLabels(packageProvider,reachableLabels,root);
    }
 catch (    NoSuchThingException e) {
      packageProvider.getEventHandler().handle(Event.error(e.getMessage()));
      throw new InvalidConfigurationException(String.format("Failed to load transitive closure of '%s': %s",root,e.getMessage()));
    }
  }
  if (packageProvider.valuesMissing()) {
    return;
  }
  for (  Map.Entry<String,Label> entry : implicitLabels.entries()) {
    if (!reachableLabels.contains(entry.getValue())) {
      throw new InvalidConfigurationException(String.format("The required %s target is not transitively reachable from a " + "command-line option: '%s'",entry.getKey(),entry.getValue()));
    }
  }
}
