{
  if (!reachableLabels.add(from)) {
    return;
  }
  Target fromTarget=packageProvider.getTarget(from);
  if (fromTarget == null) {
    return;
  }
  if (fromTarget instanceof Rule) {
    Rule rule=(Rule)fromTarget;
    final Set<Label> allLabels=new LinkedHashSet<>();
    AggregatingAttributeMapper.of(rule).visitLabels(new AcceptsLabelAttribute(){
      @Override public void acceptLabelAttribute(      Label label,      Attribute attribute){
        allLabels.add(label);
      }
    }
);
    for (    Label label : allLabels) {
      collectAllTransitiveLabels(packageProvider,reachableLabels,label);
    }
  }
}
