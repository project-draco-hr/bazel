{
  runfilesBuilder.addArtifact(testIpa()).addArtifacts(xctestIpa().asSet()).addArtifact(generatedTestScript()).addTransitiveArtifacts(plugins());
  if (!runWithLabDevice()) {
    runfilesBuilder.addArtifact(iossim()).addArtifact(stdRedirectDylib()).addTransitiveArtifacts(deviceRunfiles()).addArtifacts(testRunner().asSet());
  }
 else {
    runfilesBuilder.addTransitiveArtifacts(labDeviceRunfiles());
  }
  if (ruleContext.getConfiguration().isCodeCoverageEnabled()) {
    runfilesBuilder.addTransitiveArtifacts(objcProvider.get(ObjcProvider.SOURCE)).addTransitiveArtifacts(gcnoFiles(objcProvider));
  }
  return this;
}
