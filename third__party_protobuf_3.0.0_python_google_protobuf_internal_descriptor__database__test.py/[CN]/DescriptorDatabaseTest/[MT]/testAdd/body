def testAdd(self):
    db = descriptor_database.DescriptorDatabase()
    file_desc_proto = descriptor_pb2.FileDescriptorProto.FromString(factory_test2_pb2.DESCRIPTOR.serialized_pb)
    db.Add(file_desc_proto)
    self.assertEqual(file_desc_proto, db.FindFileByName('google/protobuf/internal/factory_test2.proto'))
    self.assertEqual(file_desc_proto, db.FindFileContainingSymbol('google.protobuf.python.internal.Factory2Message'))
    self.assertEqual(file_desc_proto, db.FindFileContainingSymbol('google.protobuf.python.internal.Factory2Message.NestedFactory2Message'))
    self.assertEqual(file_desc_proto, db.FindFileContainingSymbol('google.protobuf.python.internal.Factory2Enum'))
    self.assertEqual(file_desc_proto, db.FindFileContainingSymbol('google.protobuf.python.internal.Factory2Message.NestedFactory2Enum'))
    self.assertEqual(file_desc_proto, db.FindFileContainingSymbol('google.protobuf.python.internal.MessageWithNestedEnumOnly.NestedEnum'))
