{
  Integer index=ruleClass.getAttributeIndex(attributeName);
  if (index == null) {
    return null;
  }
  Object attrValue=attributes.getAttributeValue(index);
  if (!(attrValue instanceof Type.Selector<?>)) {
    return null;
  }
  if (((Type.Selector<?>)attrValue).getOriginalType() != type) {
    throw new IllegalArgumentException("Attribute " + attributeName + " is not of type "+ type+ " in rule "+ ruleLabel.getName());
  }
  return (Type.Selector<T>)attrValue;
}
