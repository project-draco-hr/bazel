{
  NodeEntry newval=keepEdges ? new NodeEntry() : new EdgelessNodeEntry();
  NodeEntry oldval=nodeMap.putIfAbsent(key,newval);
  return oldval == null ? newval : oldval;
}
