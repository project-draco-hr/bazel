import subprocess
import sys
import vs_toolchain
import gyp.MSVSVersion
if (len(sys.argv) < 2):
    print  >> sys.stderr, 'Usage: vs_env.py TARGET_ARCH CMD...'
    sys.exit(1)
target_arch = sys.argv[1]
cmd = sys.argv[2:]
vs_toolchain.SetEnvironmentAndGetRuntimeDllDirs()
vs_version = gyp.MSVSVersion.SelectVisualStudioVersion()
sys.exit(subprocess.call(((vs_version.SetupScript(target_arch) + ['&&']) + cmd), shell=True))
