{
  for (  String name : env.getGlobals().getDirectVariableNames()) {
    try {
      Object value=env.lookup(name);
      if (value instanceof RuleFunction) {
        RuleFunction function=(RuleFunction)value;
        if (function.skylarkFile == null) {
          function.export(skylarkFile.getPackageFragment(),name);
        }
      }
      if (value instanceof SkylarkAspect) {
        SkylarkAspect skylarkAspect=(SkylarkAspect)value;
        if (!skylarkAspect.isExported()) {
          skylarkAspect.export(skylarkFile,name);
        }
      }
    }
 catch (    NoSuchVariableException e) {
      throw new AssertionError(e);
    }
  }
}
