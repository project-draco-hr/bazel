{
  List<PathFragment> result=new ArrayList<>();
  PathFragment rulePackage=ruleContext.getLabel().getPackageFragment();
  result.add(rulePackage);
  if (hasAttribute("srcs",Type.LABEL_LIST)) {
    for (    FileProvider src : ruleContext.getPrerequisites("srcs",Mode.TARGET,FileProvider.class)) {
      PathFragment packageDir=src.getLabel().getPackageFragment();
      for (      Artifact a : src.getFilesToBuild()) {
        result.add(packageDir);
        result.add(a.getRootRelativePath().getParentDirectory());
      }
    }
  }
  if (ruleContext.getRule().isAttributeValueExplicitlySpecified("includes")) {
    PathFragment packageFragment=ruleContext.getLabel().getPackageFragment();
    result.add(packageFragment.getRelative("**"));
  }
  return result;
}
