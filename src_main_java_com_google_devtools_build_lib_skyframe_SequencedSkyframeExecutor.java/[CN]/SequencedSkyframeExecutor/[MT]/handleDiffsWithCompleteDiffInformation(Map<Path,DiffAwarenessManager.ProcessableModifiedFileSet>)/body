{
  for (  Path pathEntry : ImmutableSet.copyOf(modifiedFilesByPathEntry.keySet())) {
    DiffAwarenessManager.ProcessableModifiedFileSet processableModifiedFileSet=modifiedFilesByPathEntry.get(pathEntry);
    ModifiedFileSet modifiedFileSet=processableModifiedFileSet.getModifiedFileSet();
    Preconditions.checkState(!modifiedFileSet.treatEverythingAsModified(),pathEntry);
    Iterable<SkyKey> dirtyValues=getSkyKeysPotentiallyAffected(modifiedFileSet.modifiedSourceFiles(),pathEntry);
    handleChangedFiles(ImmutableList.of(pathEntry),new ImmutableDiff(dirtyValues,ImmutableMap.<SkyKey,SkyValue>of()));
    processableModifiedFileSet.markProcessed();
  }
}
