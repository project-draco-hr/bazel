{
  if (lastAnalysisDiscarded) {
    dropConfiguredTargetsNow();
    lastAnalysisDiscarded=false;
  }
  Differencer.Diff diff;
  if (modifiedFileSet.treatEverythingAsModified()) {
    diff=new FilesystemValueChecker(memoizingEvaluator,tsgm,null).getDirtyKeys(new BasicFilesystemDirtinessChecker());
  }
 else {
    diff=getDiff(modifiedFileSet.modifiedSourceFiles(),pathEntry);
  }
  syscalls.set(new PerBuildSyscallCache());
  recordingDiffer.invalidate(diff.changedKeysWithoutNewValues());
  recordingDiffer.inject(diff.changedKeysWithNewValues());
  invalidateTransientErrors();
}
