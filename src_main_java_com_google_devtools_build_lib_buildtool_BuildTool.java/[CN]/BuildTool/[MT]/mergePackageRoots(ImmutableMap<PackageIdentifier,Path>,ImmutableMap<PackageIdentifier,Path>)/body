{
  Map<PathFragment,Path> builder=Maps.newHashMap();
  for (  Map.Entry<PackageIdentifier,Path> entry : first.entrySet()) {
    builder.put(entry.getKey().getPackageFragment(),entry.getValue());
  }
  for (  Map.Entry<PackageIdentifier,Path> entry : second.entrySet()) {
    if (first.containsKey(entry.getKey())) {
      Preconditions.checkState(first.get(entry.getKey()).equals(entry.getValue()));
    }
 else {
      builder.put(entry.getKey().getPackageFragment(),entry.getValue());
    }
  }
  return ImmutableMap.copyOf(builder);
}
