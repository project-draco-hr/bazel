{
  CrosstoolConfigurationHelper.overwriteCrosstoolWithToolchain(directories.getWorkspace(),CrosstoolConfig.CToolchain.newBuilder().setNeedsPic(true).buildPartial());
  scratch.file("a/BUILD","cc_library(name='preprocess', srcs=['preprocess.S'])");
  assertThat(getCppCompileAction("//a:preprocess").getArgv()).contains("-fPIC");
}
