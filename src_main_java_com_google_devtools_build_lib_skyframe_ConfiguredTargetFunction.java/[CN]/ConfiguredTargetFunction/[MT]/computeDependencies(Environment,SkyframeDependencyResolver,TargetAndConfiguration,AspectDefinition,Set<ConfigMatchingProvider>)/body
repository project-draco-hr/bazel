{
  ListMultimap<Attribute,Dependency> depValueNames;
  try {
    depValueNames=resolver.dependentNodeMap(ctgValue,aspectDefinition,configConditions);
  }
 catch (  EvalException e) {
    env.getListener().handle(Event.error(e.getLocation(),e.getMessage()));
    throw new DependencyEvaluationException(new ConfiguredValueCreationException(e.print()));
  }
  Map<SkyKey,ConfiguredTarget> depValues=resolveConfiguredTargetDependencies(env,depValueNames.values(),ctgValue.getTarget());
  if (depValues == null) {
    return null;
  }
  ListMultimap<SkyKey,Aspect> depAspects=resolveAspectDependencies(env,depValues,depValueNames.values());
  if (depAspects == null) {
    return null;
  }
  return mergeAspects(depValueNames,depValues,depAspects);
}
