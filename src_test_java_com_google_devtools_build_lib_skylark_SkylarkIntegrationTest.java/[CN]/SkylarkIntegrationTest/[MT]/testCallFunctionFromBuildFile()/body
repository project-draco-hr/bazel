{
  scratch.file("test/skylark/extension.bzl","def add_suffix(s): return s + '_suf'","def custom_rule_impl(ctx): return struct()","custom_rule = rule(implementation = custom_rule_impl)");
  scratch.file("test/skylark/BUILD","load('/test/skylark/extension', 'custom_rule', 'add_suffix')","","custom_rule(name = add_suffix('foo'))");
  getConfiguredTarget("//test/skylark:foo_suf");
}
