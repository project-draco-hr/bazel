{
  scratch.file("test/skylark/extension.bzl","def _impl(ctx): pass","def _get_outputs(attr_map):","    return {'default': attr_map.x + '.out'}","simple = rule(","    implementation = _impl,","    attrs = {'x': attr.string()},","    outputs = _get_outputs)");
  checkError("test/skylark","simple","Attribute 'x' either doesn't exist or uses a select()","load('/test/skylark/extension', 'simple')","simple(","    name = 'simple',","    x = select({'//conditions:default': 'foo'}))");
}
