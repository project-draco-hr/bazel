{
  createSimpleExtension("'a'",false);
  scratch.file("test/skylark/BUILD","load('/test/skylark/extension', 'custom_rule')","","custom_rule(name = 'cr')");
  assertEquals("a",getConfiguredTarget("//test/skylark:cr").get("provider"));
  createSimpleExtension("'b'",true);
  invalidatePackages();
  assertEquals("b",getConfiguredTarget("//test/skylark:cr").get("provider"));
}
