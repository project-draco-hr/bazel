{
  scratch.file("test/skylark/extension.bzl","def rule_impl(ctx):","  return struct(p = 5)","","_custom_rule = rule(implementation = rule_impl)","def macro(name):","  _custom_rule(name = name)");
  scratch.file("test/skylark/BUILD","load('/test/skylark/extension', 'macro')","","macro(name = 'cr')");
  ConfiguredTarget target=getConfiguredTarget("//test/skylark:cr");
  assertThat(target.get("p")).isEqualTo(5);
}
