{
  scratch.file("test/skylark/extension.bzl","def custom_rule_impl(ctx): return struct()","","custom_rule = rule(implementation = custom_rule_impl)");
  checkError("test/skylark","cr","Expected failure not found: other","load('/test/skylark/extension', 'custom_rule')","custom_rule(name='cr', expect_failure='other')");
}
