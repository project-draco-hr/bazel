{
  String content=LINE_JOINER.join("def custom_rule_impl(ctx):","  return struct(provider=" + provides + ")","","custom_rule = rule(implementation = custom_rule_impl)");
  if (overwrite) {
    scratch.overwriteFile(path,content);
  }
 else {
    scratch.file(path,content);
  }
}
