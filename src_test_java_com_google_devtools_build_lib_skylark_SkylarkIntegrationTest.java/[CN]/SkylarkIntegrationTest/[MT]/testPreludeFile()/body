{
  createSimpleExtension("test/skylark/extension.bzl","'a'",false);
  scratch.overwriteFile("tools/build_rules/prelude_blaze","load('/test/skylark/extension', 'custom_rule')");
  scratch.file("test/skylark/BUILD","custom_rule(name = 'cr')");
  invalidatePackages();
  simulateLoadingPhase();
  ConfiguredTarget target=getConfiguredTarget("//test/skylark:cr");
  assertEquals("a",target.get("provider"));
}
