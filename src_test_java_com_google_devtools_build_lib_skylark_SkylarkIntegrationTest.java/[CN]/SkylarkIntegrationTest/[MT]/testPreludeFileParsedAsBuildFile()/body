{
  createSimpleExtension("test/skylark/extension.bzl","'a'",false);
  scratch.overwriteFile("tools/build_rules/prelude_blaze","load('/test/skylark/extension', 'custom_rule')","def func(): return None");
  scratch.file("test/skylark/BUILD","load('/test/skylark/extension', 'custom_rule_test')","","custom_rule_test(name = 'cr')");
  invalidatePackages();
  reporter.removeHandler(failFastHandler);
  try {
    getTarget("//test/skylark:cr");
    fail();
  }
 catch (  NoSuchTargetException e) {
    assertContainsEvent("syntax error at 'def': This is not supported in BUILD files");
  }
}
