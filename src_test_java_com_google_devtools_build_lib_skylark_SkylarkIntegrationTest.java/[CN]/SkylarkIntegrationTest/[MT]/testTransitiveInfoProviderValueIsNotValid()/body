{
  scratch.file("test/skylark/extension.bzl","def custom_rule_impl(ctx): return struct(a = ctx.configuration)","","custom_rule = rule(implementation = custom_rule_impl)");
  checkError("test/skylark","cr","Value of provider 'a' is of an illegal type: configuration","load('/test/skylark/extension', 'custom_rule')","custom_rule(name='cr')");
}
