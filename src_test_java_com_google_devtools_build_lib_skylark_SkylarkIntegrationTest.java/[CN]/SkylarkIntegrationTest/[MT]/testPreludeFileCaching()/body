{
  createSimpleExtension("test/skylark/extension1.bzl","'a'",false);
  scratch.overwriteFile("tools/build_rules/prelude_blaze","load('/test/skylark/extension1', 'custom_rule')");
  scratch.file("test/skylark/BUILD","custom_rule(name = 'cr')");
  invalidatePackages();
  simulateLoadingPhase();
  ConfiguredTarget target1=getConfiguredTarget("//test/skylark:cr");
  assertEquals("a",target1.get("provider"));
  createSimpleExtension("test/skylark/extension2.bzl","'b'",false);
  scratch.overwriteFile("tools/build_rules/prelude_blaze","load('/test/skylark/extension2', 'custom_rule')");
  invalidatePackages();
  simulateLoadingPhase();
  ConfiguredTarget target2=getConfiguredTarget("//test/skylark:cr");
  assertEquals("b",target2.get("provider"));
}
