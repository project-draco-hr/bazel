{
  ValueWithFrequency<V> vwf=map.get(key);
  if (vwf == null) {
    return null;
  }
  int oldFrequency=vwf.frequency.getAndDecrement();
  if (oldFrequency <= 0) {
    return null;
  }
  if (oldFrequency == 1) {
    map.remove(key);
  }
  return vwf.value;
}
