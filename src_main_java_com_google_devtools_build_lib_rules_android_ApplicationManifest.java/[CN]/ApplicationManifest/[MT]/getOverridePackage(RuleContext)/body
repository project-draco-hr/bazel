{
  if (ruleContext.attributes().isAttributeValueExplicitlySpecified("manifest_values")) {
    Map<String,String> manifestValues=ruleContext.attributes().get("manifest_values",Type.STRING_DICT);
    if (manifestValues.containsKey("applicationId")) {
      return manifestValues.get("applicationId");
    }
  }
  if (ruleContext.attributes().isAttributeValueExplicitlySpecified("application_id")) {
    return ruleContext.attributes().get("application_id",Type.STRING);
  }
  AndroidResourcesProvider resourcesProvider=AndroidCommon.getAndroidResources(ruleContext);
  if (resourcesProvider != null) {
    ResourceContainer resourceContainer=Iterables.getOnlyElement(resourcesProvider.getDirectAndroidResources());
    return resourceContainer.getRenameManifestPackage();
  }
 else {
    return null;
  }
}
