{
  final AndroidResourcesProvider resources=AndroidCommon.getAndroidResources(ruleContext);
  if (resources == null) {
    ruleContext.attributeError("manifest","a resources or manifest attribute is mandatory.");
    throw new RuleConfigurationException();
  }
  return new ApplicationManifest(Iterables.getOnlyElement(resources.getTransitiveAndroidResources()).getManifest());
}
