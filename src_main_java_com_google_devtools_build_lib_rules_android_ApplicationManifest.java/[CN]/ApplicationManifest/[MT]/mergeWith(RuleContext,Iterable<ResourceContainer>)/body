{
  if (!Iterables.isEmpty(getMergeeManifests(resourceContainers))) {
    Iterable<Artifact> exportedManifests=getMergeeManifests(resourceContainers);
    Artifact outputManifest=ruleContext.getAnalysisEnvironment().getDerivedArtifact(ruleContext.getUniqueDirectory(ruleContext.getRule().getName() + "_merged").getChild("AndroidManifest.xml"),ruleContext.getBinOrGenfilesDirectory());
    AndroidManifestMergeHelper.createMergeManifestAction(ruleContext,getManifest(),exportedManifests,ImmutableList.of("all"),outputManifest);
    return new ApplicationManifest(outputManifest);
  }
  return this;
}
