{
  List<ResourceSet> resourceSets=new ArrayList<>();
  List<AssetSet> assetSets=new ArrayList<>();
  if (strict) {
    androidDataToStrictMergeSet(primary,secondary,modifiers,resourceSets,assetSets);
  }
 else {
    androidDataToRelaxedMergeSet(primary,secondary,modifiers,resourceSets,assetSets);
  }
  ResourceMerger merger=new ResourceMerger();
  for (  ResourceSet set : resourceSets) {
    set.loadFromFiles(stdLogger);
    merger.addDataSet(set);
  }
  AssetMerger assetMerger=new AssetMerger();
  for (  AssetSet set : assetSets) {
    set.loadFromFiles(stdLogger);
    assetMerger.addDataSet(set);
  }
  MergedResourceWriter resourceWriter=new MergedResourceWriter(resourcesOut.toFile(),cruncher);
  MergedAssetWriter assetWriter=new MergedAssetWriter(assetsOut.toFile());
  merger.mergeData(resourceWriter,false);
  assetMerger.mergeData(assetWriter,false);
  return new MergedAndroidData(resourcesOut,assetsOut,primary.getManifest());
}
