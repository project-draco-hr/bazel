{
  if (providers.size() == 0) {
    return null;
  }
  if (providers.size() == 1) {
    return providers.get(0);
  }
  ImmutableMap.Builder<String,Object> resultBuilder=new ImmutableMap.Builder<>();
  Set<String> seenKeys=new HashSet<>();
  for (  SkylarkProviders provider : providers) {
    for (    String key : provider.skylarkProviders.keySet()) {
      if (!seenKeys.add(key)) {
        throw new IllegalStateException("Skylark provider " + key + " provided twice");
      }
      resultBuilder.put(key,provider.getValue(key));
    }
  }
  return new SkylarkProviders(resultBuilder.build());
}
