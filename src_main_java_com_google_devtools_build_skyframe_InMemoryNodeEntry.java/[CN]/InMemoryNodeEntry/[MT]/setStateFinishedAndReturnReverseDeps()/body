{
  ImmutableSet<SkyKey> reverseDepsToSignal=buildingState.getReverseDepsToSignal();
  getReverseDepsUtil().addReverseDeps(this,reverseDepsToSignal);
  getReverseDepsUtil().consolidateReverseDeps(this);
  this.directDeps=buildingState.getFinishedDirectDeps().compress();
  markDone();
  if (!keepEdges()) {
    this.directDeps=null;
    this.reverseDeps=null;
  }
  return reverseDepsToSignal;
}
