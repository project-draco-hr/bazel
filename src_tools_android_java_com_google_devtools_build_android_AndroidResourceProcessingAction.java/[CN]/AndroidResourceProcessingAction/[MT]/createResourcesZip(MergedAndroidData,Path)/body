{
  try (ZipOutputStream zout=new ZipOutputStream(new FileOutputStream(output.toFile()))){
    Path resourcesRoot=data.getResourceDir();
    Path assetsRoot=data.getAssetDir();
    Files.walkFileTree(resourcesRoot,new ZipBuilderVisitor(zout,resourcesRoot,"res"));
    if (Files.exists(assetsRoot)) {
      Files.walkFileTree(assetsRoot,new ZipBuilderVisitor(zout,assetsRoot,"assets"));
    }
  }
 }
