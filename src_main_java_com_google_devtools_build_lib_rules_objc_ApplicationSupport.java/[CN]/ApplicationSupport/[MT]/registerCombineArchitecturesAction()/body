{
  Artifact resultingLinkedBinary=intermediateArtifacts.combinedArchitectureBinary(".app");
  NestedSet<Artifact> linkedBinaries=linkedBinaries();
  ruleContext.registerAction(ObjcActionsBuilder.spawnOnDarwinActionBuilder().setMnemonic("ObjcCombiningArchitectures").addTransitiveInputs(linkedBinaries).addOutput(resultingLinkedBinary).setExecutable(ObjcActionsBuilder.LIPO).setCommandLine(CustomCommandLine.builder().addExecPaths("-create",linkedBinaries).addExecPath("-o",resultingLinkedBinary).build()).build(ruleContext));
}
