{
  ImmutableList.Builder<String> keys=ImmutableList.builder();
  keys.add(String.valueOf(System.identityHashCode(directories.getOutputBase().getFileSystem())));
  keys.add(directories.getOutputBase().toString());
  keys.add(buildOptions.computeCacheKey());
  keys.add(directories.getWorkspace().toString());
  for (  Fragment fragment : fragments.values()) {
    keys.add(fragment.cacheKey());
  }
  return StringUtilities.combineKeys(keys.build());
}
