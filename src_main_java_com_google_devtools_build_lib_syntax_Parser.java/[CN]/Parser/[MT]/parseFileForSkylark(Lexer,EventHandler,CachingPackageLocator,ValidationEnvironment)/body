{
  Parser parser=new Parser(lexer,eventHandler,locator).setSkylarkMode(true);
  List<Statement> statements=parser.parseFileInput();
  boolean hasSemanticalErrors=false;
  try {
    validationEnvironment.validateAst(statements);
  }
 catch (  EvalException e) {
    if (!e.isDueToIncompleteAST()) {
      eventHandler.handle(Event.error(e.getLocation(),e.getMessage()));
    }
    hasSemanticalErrors=true;
  }
  return new ParseResult(statements,parser.comments,parser.errorsCount > 0 || lexer.containsErrors() || hasSemanticalErrors);
}
