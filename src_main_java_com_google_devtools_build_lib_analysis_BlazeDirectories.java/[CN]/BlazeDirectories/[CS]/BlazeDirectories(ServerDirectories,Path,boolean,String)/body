{
  this.serverDirectories=serverDirectories;
  this.workspace=workspace;
  boolean useDefaultExecRootName=this.workspace == null || this.workspace.isRootDirectory();
  Path outputBase=serverDirectories.getOutputBase();
  Path execRootBase=deepExecRoot ? outputBase.getChild("execroot") : outputBase;
  if (useDefaultExecRootName) {
    this.execRoot=execRootBase.getChild(DEFAULT_EXEC_ROOT);
  }
 else {
    this.execRoot=execRootBase.getChild(workspace.getBaseName());
  }
  String relativeOutputPath=getRelativeOutputPath(productName);
  this.outputPath=execRoot.getRelative(relativeOutputPath);
  Preconditions.checkState(useDefaultExecRootName || outputPath.asFragment().equals(outputPathFromOutputBase(outputBase.asFragment(),workspace.asFragment(),deepExecRoot,productName)));
  this.localOutputPath=outputBase.getRelative(relativeOutputPath);
}
