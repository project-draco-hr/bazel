{
  String messageOld="Running the first-started action";
  ExperimentalStateTracker stateTracker=new ExperimentalStateTracker();
  stateTracker.actionStarted(new ActionStartedEvent(mockAction(messageOld,"bar/foo"),123456789));
  for (int i=0; i < 30; i++) {
    stateTracker.actionStarted(new ActionStartedEvent(mockAction("Other action " + i,"some/other/actions/number" + i),123456790 + i));
  }
  LoggingTerminalWriter terminalWriter=new LoggingTerminalWriter();
  stateTracker.writeProgressBar(terminalWriter);
  String output=terminalWriter.getWritten();
  assertTrue("Longest running action '" + messageOld + "' should be visible in output: "+ output,output.contains(messageOld));
}
