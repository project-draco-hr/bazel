{
  com.google.devtools.build.lib.syntax.Environment workspaceEnv=new com.google.devtools.build.lib.syntax.Environment();
  RuleFactory ruleFactory=new RuleFactory(packageFactory.getRuleClassProvider());
  for (  String ruleClass : ruleFactory.getRuleClassNames()) {
    Function ruleFunction=newRuleFunction(ruleFactory,builder,ruleClass);
    workspaceEnv.update(ruleClass,ruleFunction);
  }
  workspaceEnv.update(BIND,newBindFunction(builder));
  workspaceEnv.update("workspace",newWorkspaceNameFunction(holder));
  StoredEventHandler eventHandler=new StoredEventHandler();
  if (!buildFileAST.exec(workspaceEnv,eventHandler)) {
    return false;
  }
  try {
    builder.resolveBindTargets(packageFactory.getRuleClass(BIND));
  }
 catch (  NoSuchBindingException e) {
    throw new WorkspaceFileFunctionException(e);
  }
  return true;
}
