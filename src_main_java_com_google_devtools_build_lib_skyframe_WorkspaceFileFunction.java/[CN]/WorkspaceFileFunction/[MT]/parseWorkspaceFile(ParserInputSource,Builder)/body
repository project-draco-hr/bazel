{
  StoredEventHandler localReporter=new StoredEventHandler();
  BuildFileAST buildFileAST;
  buildFileAST=BuildFileAST.parseBuildFile(source,localReporter,null,false);
  if (buildFileAST.containsErrors()) {
    localReporter.handle(Event.error("WORKSPACE file could not be parsed"));
  }
 else {
    if (!evaluateWorkspaceFile(buildFileAST,builder,localReporter)) {
      localReporter.handle(Event.error("Error evaluating WORKSPACE file " + source.getPath()));
    }
  }
  builder.addEvents(localReporter.getEvents());
  if (localReporter.hasErrors()) {
    builder.setContainsErrors();
  }
}
