{
  PythonSourcesProvider sourcesProvider=new PythonSourcesProvider(transitivePythonSources,usesSharedLibraries());
  builder.add(InstrumentedFilesProvider.class,new InstrumentedFilesProviderImpl(new InstrumentedFilesCollector(ruleContext,semantics.getCoverageInstrumentationSpec(),METADATA_COLLECTOR,filesToBuild))).add(PythonSourcesProvider.class,sourcesProvider).addSkylarkTransitiveInfo(PythonSourcesProvider.SKYLARK_NAME,sourcesProvider).addOutputGroup(OutputGroupProvider.FILES_TO_COMPILE,transitivePythonSources).addOutputGroup(OutputGroupProvider.COMPILATION_PREREQUISITES,transitivePythonSources);
}
