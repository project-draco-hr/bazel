{
  Collection<Inclusion> inclusions;
  if (greppedFile != null) {
    inclusions=processIncludes(greppedFile,greppedFile.getInputStream());
  }
 else {
    RemoteParseData remoteParseData=remoteExtractor.get() == null ? null : remoteExtractor.get().shouldParseRemotely(file.getPath());
    if (remoteParseData != null && remoteParseData.shouldParseRemotely()) {
      inclusions=remoteExtractor.get().extractInclusions(file,actionExecutionContext,remoteParseData);
    }
 else {
      inclusions=extractInclusions(FileSystemUtils.readContentAsLatin1(file.getPath()));
    }
  }
  if (hints != null) {
    inclusions.addAll(hints.getHintedInclusions(file));
  }
  return ImmutableList.copyOf(inclusions);
}
