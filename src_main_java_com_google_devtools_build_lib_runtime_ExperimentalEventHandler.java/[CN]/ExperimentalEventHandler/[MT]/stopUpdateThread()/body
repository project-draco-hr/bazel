{
  Thread threadToWaitFor=null;
synchronized (this) {
    if (updateThread != null) {
      threadToWaitFor=updateThread;
      updateThread=null;
    }
  }
  if (threadToWaitFor != null) {
    threadToWaitFor.interrupt();
    boolean gotInterrupted=false;
    while (true) {
      try {
        threadToWaitFor.join();
        break;
      }
 catch (      InterruptedException e) {
        gotInterrupted=true;
      }
    }
    if (gotInterrupted) {
      Thread.currentThread().interrupt();
    }
  }
}
