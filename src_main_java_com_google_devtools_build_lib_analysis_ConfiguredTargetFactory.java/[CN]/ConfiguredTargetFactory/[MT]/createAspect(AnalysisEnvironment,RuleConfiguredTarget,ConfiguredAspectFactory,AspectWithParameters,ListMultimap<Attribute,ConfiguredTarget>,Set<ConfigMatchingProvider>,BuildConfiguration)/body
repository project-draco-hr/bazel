{
  RuleContext.Builder builder=new RuleContext.Builder(env,associatedTarget.getTarget(),associatedTarget.getConfiguration(),hostConfiguration,ruleClassProvider.getPrerequisiteValidator());
  RuleContext ruleContext=builder.setVisibility(convertVisibility(prerequisiteMap,env.getEventHandler(),associatedTarget.getTarget(),null)).setPrerequisites(prerequisiteMap).setAspectAttributes(aspectWithParameters.getDefinition().getAttributes()).setConfigConditions(configConditions).build();
  if (ruleContext.hasErrors()) {
    return null;
  }
  return aspectFactory.create(associatedTarget,ruleContext,aspectWithParameters.getParameters());
}
