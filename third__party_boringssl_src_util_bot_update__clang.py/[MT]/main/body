def main(args):
    if (not sys.platform.startswith('linux')):
        return 0
    if os.path.exists(STAMP_FILE):
        with open(STAMP_FILE) as f:
            if (f.read().strip() == PACKAGE_VERSION):
                print  >> sys.stderr, ('Clang already at %s' % (PACKAGE_VERSION,))
                return 0
    if os.path.exists(LLVM_BUILD_DIR):
        shutil.rmtree(LLVM_BUILD_DIR)
    print  >> sys.stderr, ('Downloading Clang %s' % (PACKAGE_VERSION,))
    cds_full_url = ('%s/Linux_x64/clang-%s.tgz' % (CDS_URL, PACKAGE_VERSION))
    with tempfile.NamedTemporaryFile() as temp:
        DownloadFile(cds_full_url, temp.name)
        with tarfile.open(temp.name, 'r:gz') as tar_file:
            tar_file.extractall(LLVM_BUILD_DIR)
    with open(STAMP_FILE, 'wb') as stamp_file:
        stamp_file.write(PACKAGE_VERSION)
    return 0
