{
  Map<Target,SkyKey> map=Maps.toMap(targets,TARGET_TO_SKY_KEY);
  Set<SkyKey> present=graph.getSuccessfulValues(map.values()).keySet();
  if (present.size() == targets.size()) {
    return targets;
  }
  return Maps.filterValues(map,Predicates.in(present)).keySet();
}
