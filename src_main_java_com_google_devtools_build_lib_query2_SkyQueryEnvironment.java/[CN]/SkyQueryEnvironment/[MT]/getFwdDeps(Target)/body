{
  Collection<Target> unfilteredDeps=getRawFwdDeps(target);
  if (!(target instanceof Rule)) {
    return getRawFwdDeps(target);
  }
  final Set<Label> allowedLabels=getAllowedDeps((Rule)target);
  return Collections2.filter(unfilteredDeps,new Predicate<Target>(){
    @Override public boolean apply(    Target target){
      return allowedLabels.contains(target.getLabel());
    }
  }
);
}
