{
  SkylarkRuleContext ruleContext=createRuleContext("//foo:foo");
  Object result=evalRuleContextCode(ruleContext,"dep = ruleContext.attr.tools[0]","provider(dep, 'analysis.FileProvider').files_to_build");
  SkylarkNestedSet nset=(SkylarkNestedSet)result;
  assertEquals(Artifact.class,nset.getContentType().getType());
}
