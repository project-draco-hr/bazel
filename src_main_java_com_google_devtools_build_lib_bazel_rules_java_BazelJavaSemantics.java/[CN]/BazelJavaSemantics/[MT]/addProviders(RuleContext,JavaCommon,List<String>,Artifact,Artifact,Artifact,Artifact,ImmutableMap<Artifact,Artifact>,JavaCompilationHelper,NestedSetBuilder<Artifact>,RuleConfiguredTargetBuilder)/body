{
  if (isJavaBinaryOrJavaTest(ruleContext)) {
    boolean createExec=ruleContext.attributes().get("create_executable",Type.BOOLEAN);
    ruleBuilder.add(JavaPrimaryClassProvider.class,new JavaPrimaryClassProvider(createExec ? getMainClassInternal(ruleContext) : null));
  }
}
