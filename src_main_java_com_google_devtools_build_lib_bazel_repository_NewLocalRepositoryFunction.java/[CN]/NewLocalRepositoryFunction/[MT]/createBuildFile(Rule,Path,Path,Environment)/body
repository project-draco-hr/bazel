{
  AggregatingAttributeMapper mapper=AggregatingAttributeMapper.of(rule);
  PathFragment buildFile=new PathFragment(mapper.get("build_file",Type.STRING));
  Path buildFileTarget=workspaceDirectory.getRelative(buildFile);
  if (!buildFileTarget.exists()) {
    throw new RepositoryFunctionException(new EvalException(rule.getLocation(),String.format("In %s the 'build_file' attribute does not specify an existing file " + "(%s does not exist)",rule,buildFileTarget)),Transience.PERSISTENT);
  }
  Path buildFilePath=repositoryDirectory.getRelative("BUILD");
  return createSymbolicLink(buildFilePath,buildFileTarget,env);
}
