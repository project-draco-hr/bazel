{
  RepositoryName repositoryName=(RepositoryName)skyKey.argument();
  Rule rule=getRule(repositoryName,NewLocalRepositoryRule.NAME,env);
  if (rule == null) {
    return null;
  }
  FileValue directoryValue=prepareLocalRepositorySymlinkTree(rule,env);
  if (directoryValue == null) {
    return null;
  }
  PathFragment pathFragment=getTargetPath(rule);
  if (!symlinkLocalRepositoryContents(directoryValue.realRootedPath().asPath(),getOutputBase().getFileSystem().getPath(pathFragment),env)) {
    return null;
  }
  return symlinkBuildFile(rule,getWorkspace(),directoryValue,env);
}
