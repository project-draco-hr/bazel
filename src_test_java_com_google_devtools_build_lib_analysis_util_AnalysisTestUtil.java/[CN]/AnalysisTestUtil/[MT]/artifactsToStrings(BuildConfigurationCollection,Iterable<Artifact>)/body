{
  Map<Root,String> rootMap=new HashMap<>();
  BuildConfiguration targetConfiguration=Iterables.getOnlyElement(configurations.getTargetConfigurations());
  rootMap.put(targetConfiguration.getBinDirectory(),"bin");
  rootMap.put(targetConfiguration.getGenfilesDirectory(),"genfiles");
  rootMap.put(targetConfiguration.getMiddlemanDirectory(),"internal");
  BuildConfiguration hostConfiguration=configurations.getHostConfiguration();
  rootMap.put(hostConfiguration.getBinDirectory(),"bin(host)");
  rootMap.put(hostConfiguration.getGenfilesDirectory(),"genfiles(host)");
  rootMap.put(hostConfiguration.getMiddlemanDirectory(),"internal(host)");
  Set<String> files=new LinkedHashSet<>();
  for (  Artifact artifact : artifacts) {
    Root root=artifact.getRoot();
    if (root.isSourceRoot()) {
      files.add("src " + artifact.getRootRelativePath());
    }
 else {
      String name=rootMap.get(root);
      if (name == null) {
        name="/";
      }
      files.add(name + " " + artifact.getRootRelativePath());
    }
  }
  return files;
}
