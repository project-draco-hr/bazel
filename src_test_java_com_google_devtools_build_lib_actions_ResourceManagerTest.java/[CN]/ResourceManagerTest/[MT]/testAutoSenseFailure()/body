{
  boolean isDisabled=LocalHostCapacity.isDisabled;
  assertFalse(rm.inUse());
  try {
    rm.setAutoSensing(true);
    assertEquals(rm.isAutoSensingEnabled(),!LocalHostCapacity.isDisabled);
    rm.setAutoSensing(false);
    assertFalse(rm.isAutoSensingEnabled());
    LocalHostCapacity.isDisabled=true;
    rm.setAutoSensing(true);
    assertFalse(rm.isAutoSensingEnabled());
    rm.setAutoSensing(false);
    assertFalse(rm.isAutoSensingEnabled());
  }
  finally {
    LocalHostCapacity.isDisabled=isDisabled;
    rm.setAutoSensing(false);
  }
  assertFalse(rm.inUse());
}
