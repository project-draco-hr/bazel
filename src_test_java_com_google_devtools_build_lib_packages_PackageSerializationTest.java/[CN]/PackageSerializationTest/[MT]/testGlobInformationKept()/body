{
  scratch.file("ham/head.sh");
  scratch.file("ham/tbone.sh");
  Package pkg=scratchPackage("ham","sh_library(name='ham',","           srcs=glob(['*.sh'], exclude=['tbo*.sh']))");
  Package pkg2=deserializer.deserialize(codedInputFromPackage(pkg));
  Rule ham=pkg2.getRule("ham");
  GlobList<?> globs=Rule.getGlobInfo(RawAttributeMapper.of(ham).get("srcs",BuildType.LABEL_LIST));
  assertThat(globs).containsExactly(Label.parseAbsolute("//ham:head.sh"));
  List<GlobCriteria> criteria=globs.getCriteria();
  assertThat(criteria).hasSize(1);
  assertThat(criteria.get(0).getIncludePatterns()).containsExactly("*.sh");
  assertThat(criteria.get(0).getExcludePatterns()).containsExactly("tbo*.sh");
  assertTrue(criteria.get(0).isGlob());
}
