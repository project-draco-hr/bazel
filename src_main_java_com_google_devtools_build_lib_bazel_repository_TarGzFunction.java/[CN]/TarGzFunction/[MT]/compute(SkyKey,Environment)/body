{
  DecompressorDescriptor descriptor=(DecompressorDescriptor)skyKey.argument();
  try (GZIPInputStream gzipStream=new GZIPInputStream(new FileInputStream(descriptor.archivePath().getPathFile()))){
    TarArchiveInputStream tarStream=new TarArchiveInputStream(gzipStream);
    TarArchiveEntry entry;
    while ((entry=tarStream.getNextTarEntry()) != null) {
      Path filename=descriptor.repositoryPath().getRelative(entry.getName());
      FileSystemUtils.createDirectoryAndParents(filename.getParentDirectory());
      if (entry.isDirectory()) {
        FileSystemUtils.createDirectoryAndParents(filename);
      }
 else {
        Files.copy(tarStream,filename.getPathFile().toPath(),StandardCopyOption.REPLACE_EXISTING);
        filename.chmod(entry.getMode());
      }
    }
  }
 catch (  IOException e) {
    throw new RepositoryFunctionException(e,Transience.TRANSIENT);
  }
  return new DecompressorValue(descriptor.repositoryPath());
}
