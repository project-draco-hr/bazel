{
  return new OutputFormatterCallback<Target>(){
    private final Set<String> packageNames=Sets.newTreeSet();
    @Override protected void processOutput(    Iterable<Target> partialResult) throws IOException, InterruptedException {
      for (      Target target : partialResult) {
        packageNames.add(target.getLabel().getPackageName());
      }
    }
    @Override public void close() throws IOException {
      for (      String packageName : packageNames) {
        out.println(packageName);
      }
    }
  }
;
}
