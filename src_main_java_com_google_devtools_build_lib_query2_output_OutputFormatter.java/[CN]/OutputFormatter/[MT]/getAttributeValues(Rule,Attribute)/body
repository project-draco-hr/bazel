{
  AttributeValueSource source;
  if (attr.getName().equals("visibility")) {
    if (rule.isVisibilitySpecified()) {
      source=AttributeValueSource.RULE;
    }
 else     if (rule.getPackage().isDefaultVisibilitySet()) {
      source=AttributeValueSource.PACKAGE;
    }
 else {
      source=AttributeValueSource.DEFAULT;
    }
  }
 else {
    source=rule.isAttributeValueExplicitlySpecified(attr) ? AttributeValueSource.RULE : AttributeValueSource.DEFAULT;
  }
  return Pair.of(AttributeSerializer.getAttributeValues(rule,attr),source);
}
