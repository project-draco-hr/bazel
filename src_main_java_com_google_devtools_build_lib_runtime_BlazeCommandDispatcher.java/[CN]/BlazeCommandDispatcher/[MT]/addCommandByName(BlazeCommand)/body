{
  String name=command.getClass().getAnnotation(Command.class).name();
  if (commandsByName.containsKey(name)) {
    throw new IllegalStateException("Command name or alias " + name + " is already used.");
  }
  commandsByName.put(name,command);
}
