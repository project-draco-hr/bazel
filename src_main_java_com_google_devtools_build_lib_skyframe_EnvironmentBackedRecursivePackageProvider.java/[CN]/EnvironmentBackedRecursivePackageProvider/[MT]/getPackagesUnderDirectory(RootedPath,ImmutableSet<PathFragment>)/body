{
  PathFragment rootedPathFragment=directory.getRelativePath();
  PathFragment.checkAllPathsAreUnder(excludedSubdirectories,rootedPathFragment);
  RecursivePkgValue lookup=(RecursivePkgValue)env.getValue(RecursivePkgValue.key(directory,excludedSubdirectories));
  if (lookup == null) {
    throw new MissingDepException();
  }
  return Iterables.transform(lookup.getPackages(),PathFragment.TO_PATH_FRAGMENT);
}
