{
  if (!(expectedType.isAssignableFrom(realValue.getClass()))) {
    throw new EvalException(loc,String.format("expected %s for '%s' but got %s instead\n" + "%s.%s: %s",EvalUtils.getDataTypeNameFromClass(expectedType),paramName,EvalUtils.getDatatypeName(realValue),functionName,paramName,paramDoc));
  }
  if (expectedType.equals(SkylarkList.class)) {
    checkGeneric(functionName,paramName,expectedType,expectedGenericType,realValue,((SkylarkList)realValue).getGenericType(),loc,paramDoc);
  }
 else   if (expectedType.equals(SkylarkNestedSet.class)) {
    checkGeneric(functionName,paramName,expectedType,expectedGenericType,realValue,((SkylarkNestedSet)realValue).getGenericType(),loc,paramDoc);
  }
  return (T)realValue;
}
