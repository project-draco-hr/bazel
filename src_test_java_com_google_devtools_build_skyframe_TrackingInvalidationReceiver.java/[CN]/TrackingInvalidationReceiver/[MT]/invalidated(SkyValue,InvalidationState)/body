{
switch (state) {
case DELETED:
    dirty.remove(value);
  deleted.add(value);
break;
case DIRTY:
dirty.add(value);
Preconditions.checkState(!deleted.contains(value));
break;
default :
throw new IllegalStateException();
}
}
