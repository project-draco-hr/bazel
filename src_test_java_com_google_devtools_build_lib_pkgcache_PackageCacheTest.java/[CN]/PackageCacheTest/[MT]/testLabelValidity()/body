{
  reporter.removeHandler(failFastHandler);
  setUpCacheWithTwoRootLocator();
  scratch.file(rootDir2 + "/c/d/foo.txt");
  assertLabelValidity(true,"//a:foo.txt");
  assertLabelValidity(true,"//a:bar/foo.txt");
  assertLabelValidity(false,"//a/bar:foo.txt");
  assertLabelValidity(true,"//b:foo.txt");
  assertLabelValidity(true,"//b:bar/foo.txt");
  assertLabelValidity(false,"//b/bar:foo.txt");
  assertLabelValidity(true,"//c:foo.txt");
  assertLabelValidity(true,"//c:bar/foo.txt");
  assertLabelValidity(false,"//c/bar:foo.txt");
  assertLabelValidity(true,"//c:foo.txt");
  assertLabelValidity(false,"//c:d/foo.txt");
  assertLabelValidity(true,"//c/d:foo.txt");
  assertLabelValidity(true,"//c:foo.txt");
  assertLabelValidity(true,"//c:e");
  assertLabelValidity(true,"//c:e/foo.txt");
  assertLabelValidity(false,"//c/e:foo.txt");
  assertLabelValidity(true,"//f:foo.txt");
  assertLabelValidity(true,"//f:g/foo.txt");
  assertLabelValidity(false,"//f/g:foo.txt");
  assertLabelValidity(false,"//f:g/h/foo.txt");
  assertLabelValidity(false,"//f/g:h/foo.txt");
  assertLabelValidity(true,"//f/g/h:foo.txt");
}
