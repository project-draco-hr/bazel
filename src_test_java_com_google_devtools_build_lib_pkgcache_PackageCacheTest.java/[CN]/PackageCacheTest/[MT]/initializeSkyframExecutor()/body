{
  ruleClassProvider=TestRuleClassProvider.getRuleClassProvider();
  BlazeDirectories directories=new BlazeDirectories(outputBase,outputBase,rootDirectory);
  skyframeExecutor=SequencedSkyframeExecutor.create(new PackageFactory(ruleClassProvider),new TimestampGranularityMonitor(BlazeClock.instance()),directories,null,null,ruleClassProvider.getBuildInfoFactories(),ImmutableList.<DiffAwareness.Factory>of(),Predicates.<PathFragment>alwaysFalse(),Preprocessor.Factory.Supplier.NullSupplier.INSTANCE,AnalysisMock.get().getSkyFunctions(directories),ImmutableList.<PrecomputedValue.Injected>of(),ImmutableList.<SkyValueDirtinessChecker>of());
  skyframeExecutor.preparePackageLoading(new PathPackageLocator(outputBase,ImmutableList.of(rootDirectory)),ConstantRuleVisibility.PUBLIC,true,7,"",UUID.randomUUID());
  setUpSkyframe(parsePackageCacheOptions());
}
