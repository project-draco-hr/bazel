{
  Build.TargetOrTerminator tot;
  while (!(tot=Build.TargetOrTerminator.parseDelimitedFrom(in)).getIsTerminator()) {
    Build.Target target=tot.getTarget();
switch (target.getType()) {
case SOURCE_FILE:
      context.deserializeInputFile(target.getSourceFile());
    break;
case PACKAGE_GROUP:
  context.deserializePackageGroup(target.getPackageGroup());
break;
case RULE:
context.deserializeRule(target.getRule());
break;
default :
throw new IllegalStateException("Unexpected Target type: " + target.getType());
}
}
}
