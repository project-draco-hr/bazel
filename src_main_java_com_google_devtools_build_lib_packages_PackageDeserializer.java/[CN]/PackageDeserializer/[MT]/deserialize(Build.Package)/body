{
  Package.Builder builder;
  try {
    builder=new Package.Builder(new PackageIdentifier(packagePb.getRepository(),new PathFragment(packagePb.getName())));
  }
 catch (  SyntaxException e) {
    throw new PackageDeserializationException(e);
  }
  StoredEventHandler eventHandler=new StoredEventHandler();
  deserializeInternal(packagePb,eventHandler,builder);
  builder.addEvents(eventHandler.getEvents());
  return builder.build();
}
