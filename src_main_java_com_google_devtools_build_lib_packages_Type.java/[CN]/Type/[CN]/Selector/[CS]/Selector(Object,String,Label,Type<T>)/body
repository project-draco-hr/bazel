{
  Preconditions.checkState(x instanceof Map<?,?>);
  try {
    defaultConditionLabel=Label.parseAbsolute(DEFAULT_CONDITION_KEY);
  }
 catch (  LabelSyntaxException e) {
    throw new IllegalStateException(DEFAULT_CONDITION_KEY + " is not a valid label");
  }
  this.originalType=originalType;
  Map<Label,T> result=Maps.newLinkedHashMap();
  boolean foundDefaultCondition=false;
  for (  Entry<?,?> entry : ((Map<?,?>)x).entrySet()) {
    Label key=LABEL.convert(entry.getKey(),what,context);
    if (key.equals(defaultConditionLabel)) {
      foundDefaultCondition=true;
    }
    result.put(key,originalType.convert(entry.getValue(),what,context));
  }
  map=ImmutableMap.copyOf(result);
  hasDefaultCondition=foundDefaultCondition;
}
