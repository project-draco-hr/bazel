{
  return (int)Math.min(Math.max(len,maxAlloc),limit - off);
}
