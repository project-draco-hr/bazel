{
  if (resource.getDensity().equals(density)) {
    return -2;
  }
  double affinity=Math.log((double)(DENSITY_MAP.get(density)) / DENSITY_MAP.get(resource.getDensity())) / Math.log(2);
  if (affinity == -1) {
    return affinity;
  }
 else   if (affinity < 0) {
    affinity=Math.abs(affinity + 0.01);
  }
  return affinity;
}
