{
  ImmutableList<String> actualLinkstampCompileOptions;
  if (linkstampCompileOptions.isEmpty()) {
    actualLinkstampCompileOptions=DEFAULT_LINKSTAMP_OPTIONS;
  }
 else {
    actualLinkstampCompileOptions=ImmutableList.copyOf(Iterables.concat(DEFAULT_LINKSTAMP_OPTIONS,linkstampCompileOptions));
  }
  CcToolchainFeatures.Variables variables=null;
  FeatureConfiguration featureConfiguration=null;
  if (ruleContext != null) {
    if (toolchain != null) {
      featureConfiguration=CcCommon.configureFeatures(ruleContext,toolchain);
    }
 else {
      featureConfiguration=CcCommon.configureFeatures(ruleContext);
    }
    CcToolchainFeatures.Variables.Builder buildVariables=new CcToolchainFeatures.Variables.Builder();
    CppConfiguration cppConfiguration=ruleContext.getFragment(CppConfiguration.class);
    cppConfiguration.getFdoSupport().getLinkOptions(featureConfiguration,buildVariables);
    variables=buildVariables.build();
  }
  return new LinkCommandLine(configuration,owner,output,interfaceOutput,symbolCountsOutput,buildInfoHeaderArtifacts,linkerInputs,runtimeInputs,linkTargetType,linkStaticness,linkopts,features,linkstamps,actualLinkstampCompileOptions,runtimeSolibDir,nativeDeps,useTestOnlyFlags,needWholeArchive,allLTOBackendArtifacts,paramFile,interfaceSoBuilder,variables,featureConfiguration);
}
