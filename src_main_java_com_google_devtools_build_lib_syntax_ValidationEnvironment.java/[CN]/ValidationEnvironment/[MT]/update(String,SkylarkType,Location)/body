{
  checkReadonly(varname,location);
  if (parent == null) {
    readOnlyVariables.add(varname);
    if (!futureReadOnlyVariables.isEmpty()) {
      futureReadOnlyVariables.peek().add(varname);
    }
  }
  SkylarkType oldVartype=variableTypes.get(SkylarkType.GLOBAL).get(varname);
  if (oldVartype != null) {
    newVartype=oldVartype.infer(newVartype,"variable '" + varname + "'",location,variableLocations.get(varname));
  }
  variableTypes.get(SkylarkType.GLOBAL).put(varname,newVartype);
  variableLocations.put(varname,location);
  clonable=false;
}
