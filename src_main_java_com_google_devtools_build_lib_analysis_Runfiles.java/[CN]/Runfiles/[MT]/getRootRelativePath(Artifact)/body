{
  Preconditions.checkArgument(artifact != null);
  if (artifact.isInMainRepo()) {
    return artifact.getRootRelativePath();
  }
  return new PathFragment(Label.EXTERNAL_PATH_PREFIX).getRelative(artifact.isSourceArtifact() ? artifact.getRoot().getPath().getBaseName() : artifact.getRoot().getExecRoot().getBaseName()).getRelative(artifact.getRootRelativePath());
}
