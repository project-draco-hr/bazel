{
  String architecture=configuration.getDependencySingleArchitecture();
  for (  XcodeProvider dependency : dependencies) {
    if (dependency.productType == XcodeProductType.EXTENSION) {
      this.extensions.add(dependency);
      this.inputsToXcodegen.addTransitive(dependency.inputsToXcodegen);
    }
 else     if (dependency.architecture.equals(architecture)) {
      if (doPropagate) {
        this.propagatedDependencies.add(dependency);
        this.propagatedDependencies.addTransitive(dependency.propagatedDependencies);
        this.addTransitiveSets(dependency);
      }
 else {
        this.nonPropagatedDependencies.add(dependency);
        this.nonPropagatedDependencies.addTransitive(dependency.propagatedDependencies);
        this.nonPropagatedUserHeaderSearchPaths.addTransitive(dependency.propagatedUserHeaderSearchPaths);
        this.nonPropagatedHeaderSearchPaths.addTransitive(dependency.propagatedHeaderSearchPaths);
        this.inputsToXcodegen.addTransitive(dependency.inputsToXcodegen);
      }
    }
  }
  return this;
}
