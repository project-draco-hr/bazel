{
  boolean successful=false;
  try {
    compileJavaLibrary(build,err);
    buildJar(build);
    if (!build.getProcessors().isEmpty()) {
      if (build.getGeneratedSourcesOutputJar() != null) {
        buildGensrcJar(build,err);
      }
    }
    successful=true;
  }
  finally {
    build.getDependencyModule().emitDependencyInformation(build.getClassPath(),successful);
    build.getProcessingModule().emitManifestProto();
    shutdown(err);
  }
}
