{
  prepareSourceCompilation(build);
  if (build.getSourceFiles().isEmpty()) {
    return Result.OK;
  }
  JavacRunner javacRunner=new JavacRunner(){
    @Override public Result invokeJavac(    ImmutableList<BlazeJavaCompilerPlugin> plugins,    String[] args,    PrintWriter output){
      return new BlazeJavacMain(output,plugins).compile(args);
    }
  }
;
  Result result;
  try (PrintWriter javacErrorOutputWriter=new PrintWriter(err)){
    result=compileSources(build,javacRunner,javacErrorOutputWriter);
  }
   runClassPostProcessing(build);
  return result;
}
