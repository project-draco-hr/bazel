{
  OptionsParser parser=OptionsParser.newOptionsParser(ImmutableList.<Class<? extends OptionsBase>>builder().addAll(buildOptionClasses).add(TestOptions.class).build());
  parser.parse(args);
  ImmutableSortedSet<String> multiCpu=ImmutableSortedSet.copyOf(parser.getOptions(TestOptions.class).multiCpus);
  factory.forbidSanityCheck();
  BuildOptions buildOptions=BuildOptions.of(buildOptionClasses,parser);
  BuildConfigurationCollection collection=skyframeExecutor.createConfigurations(factory,new BuildConfigurationKey(buildOptions,new BlazeDirectories(outputBase,outputBase,workspace),clientEnv,multiCpu));
  return collection;
}
