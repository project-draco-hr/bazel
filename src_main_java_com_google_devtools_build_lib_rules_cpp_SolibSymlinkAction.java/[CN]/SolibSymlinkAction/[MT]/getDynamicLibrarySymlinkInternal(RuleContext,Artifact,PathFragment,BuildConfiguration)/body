{
  Preconditions.checkArgument(Link.SHARED_LIBRARY_FILETYPES.matches(library.getFilename()));
  Preconditions.checkArgument(!library.getRootRelativePath().getSegment(0).startsWith("_solib_"));
  Root root=configuration.getBinDirectory();
  Artifact symlink=ruleContext.getAnalysisEnvironment().getDerivedArtifact(symlinkName,root);
  ruleContext.registerAction(new SolibSymlinkAction(ruleContext.getActionOwner(),library,symlink));
  return LinkerInputs.solibLibraryToLink(symlink,library);
}
