{
  Preconditions.checkNotNull(buildRequest);
  Preconditions.checkNotNull(env);
  if (isSandboxingSupported(env)) {
    Iterable<ActionContextProvider> ret;
    try {
      ret=ImmutableList.<ActionContextProvider>of(SandboxActionContextProvider.create(env,buildRequest,backgroundWorkers));
    }
 catch (    IOException e) {
      throw new IllegalArgumentException(e);
    }
    return ret;
  }
  if (!buildRequest.getOptions(SandboxOptions.class).ignoreUnsupportedSandboxing && OS.getCurrent() == OS.LINUX) {
    env.getReporter().handle(Event.warn(SANDBOX_NOT_SUPPORTED_MESSAGE));
  }
  return ImmutableList.of();
}
