{
  Preconditions.checkNotNull(buildRequest);
  Preconditions.checkNotNull(env);
  if (isSandboxingSupported(env)) {
    return ImmutableList.<ActionContextProvider>of(new SandboxActionContextProvider(env,buildRequest,backgroundWorkers));
  }
  if (!buildRequest.getOptions(SandboxOptions.class).ignoreUnsupportedSandboxing && OS.getCurrent() == OS.LINUX) {
    env.getReporter().handle(Event.warn(SANDBOX_NOT_SUPPORTED_MESSAGE));
  }
  return ImmutableList.of();
}
