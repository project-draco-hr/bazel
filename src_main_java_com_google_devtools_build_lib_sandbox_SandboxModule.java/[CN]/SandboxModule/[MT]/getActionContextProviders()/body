{
  Preconditions.checkNotNull(buildRequest);
  Preconditions.checkNotNull(runtime);
  if (sandboxingSupported == null) {
    sandboxingSupported=NamespaceSandboxRunner.isSupported(runtime);
  }
  if (sandboxingSupported) {
    return ImmutableList.<ActionContextProvider>of(new SandboxActionContextProvider(runtime,buildRequest,backgroundWorkers));
  }
  if (!buildRequest.getOptions(SandboxOptions.class).ignoreUnsupportedSandboxing && OS.getCurrent() == OS.LINUX) {
    runtime.getReporter().handle(Event.warn(SANDBOX_NOT_SUPPORTED_MESSAGE));
  }
  return ImmutableList.of();
}
