{
  this.ruleContext=ruleContext;
  checkIdlRootImport(ruleContext);
  idls=getIdlSrcs(ruleContext);
  if (!idls.isEmpty() && !ruleContext.hasErrors()) {
    translatedIdlSources=generateTranslatedIdlArtifacts(ruleContext,idls);
    idlClassJar=createIdlJar(classJar,"-idl.jar");
    idlSourceJar=createIdlJar(classJar,"-idl.srcjar");
  }
 else {
    translatedIdlSources=ImmutableMap.of();
    idlClassJar=null;
    idlSourceJar=null;
  }
  androidIdlProvider=createAndroidIdlProvider(ruleContext,idlClassJar,idlSourceJar);
}
