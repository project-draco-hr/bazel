{
  Map<String,SkylarkType> builtIn=new HashMap<>();
  collectSkylarkTypesFromFields(Environment.class,builtIn);
  for (  Class<?> moduleClass : MODULES) {
    if (moduleClass.isAnnotationPresent(SkylarkModule.class)) {
      builtIn.put(moduleClass.getAnnotation(SkylarkModule.class).name(),SkylarkType.of(moduleClass));
    }
  }
  MethodLibrary.setupValidationEnvironment(builtIn);
  for (  Class<?> module : MODULES) {
    collectSkylarkTypesFromFields(module,builtIn);
  }
  builtIn.putAll(extraObjects);
  return new ValidationEnvironment(builtIn);
}
