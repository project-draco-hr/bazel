{
  List<Statement> input=parseFileForSkylark("a = 1\n" + "def func():\n" + "  b = a\n"+ "  a = 2\n"+ "  return b\n"+ "c = func()\n");
  try {
    exec(input,env);
    fail();
  }
 catch (  EvalException e) {
    assertThat(e.getMessage()).contains("Variable 'a' is referenced before assignment.");
  }
}
