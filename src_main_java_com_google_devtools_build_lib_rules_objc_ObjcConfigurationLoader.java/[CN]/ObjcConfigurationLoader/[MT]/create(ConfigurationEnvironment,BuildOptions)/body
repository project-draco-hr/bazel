{
  Options options=buildOptions.get(BuildConfiguration.Options.class);
  ObjcCommandLineOptions objcOptions=buildOptions.get(ObjcCommandLineOptions.class);
  Label gcovLabel=null;
  if (options.collectCodeCoverage) {
    gcovLabel=forceLoad(env,"//third_party/gcov:gcov_for_xcode");
  }
  Label dumpSymsLabel=null;
  if (objcOptions.generateDebugSymbols) {
    dumpSymsLabel=forceLoad(env,"//tools/objc:dump_syms");
  }
  Label defaultProvisioningProfileLabel=null;
  if (Platform.forArch(objcOptions.iosCpu) == Platform.DEVICE) {
    defaultProvisioningProfileLabel=forceLoad(env,"//tools/objc:default_provisioning_profile");
  }
  return new ObjcConfiguration(objcOptions,options,gcovLabel,dumpSymsLabel,defaultProvisioningProfileLabel);
}
