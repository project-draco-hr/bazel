{
  Set<AspectWithParameters> aspectCandidates=new LinkedHashSet<>();
  for (  Map.Entry<Class<? extends AspectFactory<?,?,?>>,AspectParameters> aspectWithParameters : attribute.getAspectsWithParameters(originalRule).entrySet()) {
    aspectCandidates.add(new AspectWithParameters(aspectWithParameters.getKey().asSubclass(ConfiguredAspectFactory.class),aspectWithParameters.getValue()));
  }
  if (aspectDefinition != null) {
    for (    Class<? extends AspectFactory<?,?,?>> aspect : aspectDefinition.getAttributeAspects().get(attribute.getName())) {
      aspectCandidates.add(new AspectWithParameters(aspect.asSubclass(ConfiguredAspectFactory.class),aspectParameters));
    }
  }
  return aspectCandidates;
}
