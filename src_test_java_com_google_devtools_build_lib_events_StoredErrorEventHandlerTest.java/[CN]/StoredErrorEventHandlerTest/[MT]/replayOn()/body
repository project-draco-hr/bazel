{
  StoredEventHandler eventHandler=new StoredEventHandler();
  StoredEventHandler sink=new StoredEventHandler();
  List<Event> events=ImmutableList.of(Event.warn("a"),Event.error("b"),Event.info("c"),Event.warn("d"));
  for (  Event e : events) {
    eventHandler.handle(e);
  }
  eventHandler.replayOn(sink);
  assertEquals(events.size(),sink.getEvents().size());
  for (int i=0; i < events.size(); i++) {
    assertEquals(events.get(i),sink.getEvents().get(i));
  }
}
