def testTimedeltaConversion(self):
    message = duration_pb2.Duration()
    message.FromNanoseconds(1999999999)
    td = message.ToTimedelta()
    self.assertEqual(1, td.seconds)
    self.assertEqual(999999, td.microseconds)
    message.FromNanoseconds((-1999999999))
    td = message.ToTimedelta()
    self.assertEqual((-1), td.days)
    self.assertEqual(86398, td.seconds)
    self.assertEqual(1, td.microseconds)
    message.FromMicroseconds((-1))
    td = message.ToTimedelta()
    self.assertEqual((-1), td.days)
    self.assertEqual(86399, td.seconds)
    self.assertEqual(999999, td.microseconds)
    converted_message = duration_pb2.Duration()
    converted_message.FromTimedelta(td)
    self.assertEqual(message, converted_message)
