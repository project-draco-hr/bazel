{
  if (!objcProvider.is(USES_SWIFT)) {
    return;
  }
  AppleConfiguration appleConfiguration=ruleContext.getFragment(AppleConfiguration.class);
  CustomCommandLine.Builder commandLine=CustomCommandLine.builder().addPath(intermediateArtifacts.swiftSupportZip().getExecPath()).add("SwiftSupport/" + AppleToolchain.swiftPlatform(appleConfiguration)).add("--platform").add(AppleToolchain.swiftPlatform(appleConfiguration)).addExecPath("--scan-executable",intermediateArtifacts.combinedArchitectureBinary());
  ruleContext.registerAction(ObjcRuleClasses.spawnAppleEnvActionBuilder(ruleContext).setMnemonic("SwiftCopySwiftSupport").setExecutable(attributes.swiftStdlibToolWrapper()).setCommandLine(commandLine.build()).addOutput(intermediateArtifacts.swiftSupportZip()).addInput(intermediateArtifacts.combinedArchitectureBinary()).build(ruleContext));
}
