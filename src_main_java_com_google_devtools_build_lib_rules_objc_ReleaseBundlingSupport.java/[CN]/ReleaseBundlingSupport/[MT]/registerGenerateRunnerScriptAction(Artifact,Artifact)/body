{
  ObjcConfiguration objcConfiguration=ObjcRuleClasses.objcConfiguration(ruleContext);
  ImmutableList<Substitution> substitutions=ImmutableList.of(Substitution.of("%app_name%",ruleContext.getLabel().getName()),Substitution.of("%ipa_file%",ipaInput.getRootRelativePath().getPathString()),Substitution.of("%sim_device%",objcConfiguration.getIosSimulatorDevice()),Substitution.of("%sdk_version%",objcConfiguration.getIosSimulatorVersion()),Substitution.of("%iossim%",attributes.iossim().getRootRelativePath().getPathString()));
  ruleContext.registerAction(new TemplateExpansionAction(ruleContext.getActionOwner(),attributes.runnerScriptTemplate(),runnerScript,substitutions,true));
  return this;
}
