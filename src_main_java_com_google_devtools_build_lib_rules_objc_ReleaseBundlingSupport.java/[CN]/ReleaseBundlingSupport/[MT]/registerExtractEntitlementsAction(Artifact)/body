{
  ruleContext.registerAction(ObjcActionsBuilder.spawnOnDarwinActionBuilder().setMnemonic("ExtractIosEntitlements").setProgressMessage("Extracting entitlements: " + ruleContext.getLabel()).setExecutable(new PathFragment("/bin/bash")).addArgument("-c").addArgument("set -e && " + "PLIST=$(" + extractPlistCommand(attributes.provisioningProfile()) + ") && "+ "/usr/libexec/PlistBuddy -x -c 'Print Entitlements' /dev/stdin <<< \"${PLIST}\" "+ "> "+ entitlements.getExecPathString()).addInput(attributes.provisioningProfile()).addOutput(entitlements).build(ruleContext));
  return this;
}
