{
  ruleContext.registerAction(ObjcActionsBuilder.spawnOnDarwinActionBuilder().setMnemonic("ExtractIosEntitlements").setProgressMessage("Extracting entitlements: " + ruleContext.getLabel()).setExecutable(new PathFragment("/bin/bash")).addArgument("-c").addArgument("set -e && " + "PLIST=$(mktemp -t entitlements.plist) && trap \"rm ${PLIST}\" EXIT && " + extractPlistCommand(attributes.provisioningProfile()) + " > ${PLIST} && "+ "/usr/libexec/PlistBuddy -x -c 'Print Entitlements' ${PLIST} > "+ entitlements.getExecPathString()).addInput(attributes.provisioningProfile()).addOutput(entitlements).build(ruleContext));
  return this;
}
