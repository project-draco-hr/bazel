{
  AppleConfiguration configuration=ruleContext.getFragment(AppleConfiguration.class);
  String platformWithVersion=String.format("%s%s",configuration.getBundlingPlatform().getLowerCaseNameInPlist(),Strings.nullToEmpty(configuration.getIosSdkVersion()));
  ruleContext.registerAction(ObjcRuleClasses.spawnOnDarwinActionBuilder(ruleContext).setMnemonic("EnvironmentPlist").addInput(attributes.environmentPlistScript()).setExecutable(attributes.environmentPlistScript()).addArguments("--platform",platformWithVersion).addArguments("--output",getGeneratedEnvironmentPlist().getExecPathString()).addOutput(getGeneratedEnvironmentPlist()).build(ruleContext));
}
