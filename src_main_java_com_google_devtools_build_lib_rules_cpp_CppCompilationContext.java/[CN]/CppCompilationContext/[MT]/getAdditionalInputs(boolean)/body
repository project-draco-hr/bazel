{
  NestedSetBuilder<Artifact> builder=NestedSetBuilder.stableOrder();
  if (useHeaderModules) {
    if (usePic) {
      builder.addTransitive(picTopLevelHeaderModules);
      builder.addTransitive(picImpliedHeaderModules);
    }
 else {
      builder.addTransitive(topLevelHeaderModules);
      builder.addTransitive(impliedHeaderModules);
    }
  }
  builder.addTransitive(directModuleMaps);
  if (provideTransitiveModuleMaps) {
    builder.addTransitive(transitiveModuleMaps);
  }
  if (cppModuleMap != null) {
    builder.add(cppModuleMap.getArtifact());
  }
  return builder.build();
}
