{
  Preconditions.checkNotNull(commandLineContext);
  Preconditions.checkArgument(!depsContexts.isEmpty());
  this.commandLineContext=commandLineContext;
  this.depsContexts=ImmutableList.copyOf(depsContexts);
  this.cppModuleMap=cppModuleMap;
  this.headerModule=headerModule;
  this.picHeaderModule=picHeaderModule;
  this.provideTransitiveModuleMaps=provideTransitiveModuleMaps;
  this.useHeaderModules=useHeaderModules;
  if (depsContexts.size() == 1) {
    compilationPrerequisites=(depsContexts.get(0).compilationPrerequisiteStampFile != null) ? ImmutableSet.<Artifact>of(depsContexts.get(0).compilationPrerequisiteStampFile) : ImmutableSet.<Artifact>of();
  }
 else {
    ImmutableSet.Builder<Artifact> prerequisites=ImmutableSet.builder();
    for (    DepsContext depsContext : depsContexts) {
      if (depsContext.compilationPrerequisiteStampFile != null) {
        prerequisites.add(depsContext.compilationPrerequisiteStampFile);
      }
    }
    compilationPrerequisites=prerequisites.build();
  }
}
