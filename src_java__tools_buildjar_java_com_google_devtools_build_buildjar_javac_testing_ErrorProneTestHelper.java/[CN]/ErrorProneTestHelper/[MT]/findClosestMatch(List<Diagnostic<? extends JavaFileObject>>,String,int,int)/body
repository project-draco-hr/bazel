{
  Diagnostic<? extends JavaFileObject> closeMatch=null;
  Pattern pattern=Pattern.compile(regex);
  for (  Diagnostic<? extends JavaFileObject> diagnostic : diagnostics) {
    if (pattern.matcher(diagnostic.getMessage(null)).matches()) {
      if (line == diagnostic.getLineNumber() && col == diagnostic.getColumnNumber()) {
        return diagnostic;
      }
 else {
        closeMatch=diagnostic;
      }
    }
  }
  return closeMatch;
}
