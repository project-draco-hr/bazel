{
  AndroidSdkProvider sdk=AndroidSdkProvider.fromRuleContext(ruleContext);
  return new JackCompilationHelper.Builder().setRuleContext(ruleContext).setOutputArtifact(ruleContext.getImplicitOutputArtifact(AndroidRuleClasses.ANDROID_LIBRARY_JACK_FILE)).setAndroidSdk(sdk).addJavaSources(attributes.getSourceFiles()).addSourceJars(attributes.getSourceJars()).addResources(attributes.getResources()).addProcessorNames(attributes.getProcessorNames()).addProcessorClasspathJars(attributes.getProcessorPath()).addExports(JavaCommon.getExports(ruleContext)).addClasspathDeps(javaCommon.targetsTreatedAsDeps(ClasspathType.COMPILE_ONLY)).addRuntimeDeps(javaCommon.targetsTreatedAsDeps(ClasspathType.RUNTIME_ONLY)).build();
}
