{
  JavaCompilationArtifacts.Builder javaArtifactsBuilder=new JavaCompilationArtifacts.Builder();
  JavaTargetAttributes.Builder javacJarAttributes=new JavaTargetAttributes.Builder(javaSemantics);
  javacJarAttributes.addSourceJar(javaSourceJar);
  JavaCompilationHelper javacHelper=new JavaCompilationHelper(ruleContext,javaSemantics,getJavacOpts(),javacJarAttributes);
  Artifact outputDepsProto=javacHelper.createOutputDepsProtoArtifact(binaryResourcesJar,javaArtifactsBuilder);
  javacHelper.createCompileActionWithInstrumentation(binaryResourcesJar,null,null,outputDepsProto,javaArtifactsBuilder);
}
