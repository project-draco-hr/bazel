{
  if (concurrent) {
    AtomicBoolean ranTask=new AtomicBoolean(false);
    try {
      long tasks=remainingTasks.incrementAndGet();
      Preconditions.checkState(tasks > 0,"Incrementing remaining tasks counter resulted in impossible non-positive number.");
      executeRunnable(wrapRunnable(runnable,ranTask));
    }
 catch (    Throwable e) {
      if (!ranTask.get()) {
        recordError(e);
      }
    }
  }
 else {
    runnable.run();
  }
}
