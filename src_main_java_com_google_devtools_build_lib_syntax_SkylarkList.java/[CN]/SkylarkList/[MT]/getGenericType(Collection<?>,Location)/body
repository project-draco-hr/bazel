{
  Class<?> genericType=elements.iterator().next().getClass();
  for (  Object element : elements) {
    Class<?> type=element.getClass();
    if (!EvalUtils.getSkylarkType(genericType).equals(EvalUtils.getSkylarkType(type))) {
      throw new EvalException(loc,String.format("Incompatible types in list: found a %s but the first element is a %s",EvalUtils.getDataTypeNameFromClass(type),EvalUtils.getDataTypeNameFromClass(genericType)));
    }
  }
  return genericType;
}
