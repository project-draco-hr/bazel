{
  SkylarkType type=SkylarkType.TOP;
  for (  Object element : elements) {
    SkylarkType elementType=SkylarkType.typeOf(element);
    SkylarkType inter=SkylarkType.intersection(type,elementType);
    if (inter == SkylarkType.BOTTOM) {
      throw new EvalException(loc,String.format("Incompatible types in list: found a %s but the previous elements were %ss",elementType,type));
    }
 else {
      type=inter;
    }
  }
  return type;
}
