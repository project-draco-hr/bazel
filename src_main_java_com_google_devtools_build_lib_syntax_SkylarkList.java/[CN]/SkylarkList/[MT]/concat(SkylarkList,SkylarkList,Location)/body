{
  if (left.isTuple() != right.isTuple()) {
    throw new EvalException(loc,"cannot concatenate lists and tuples");
  }
  if (left == EMPTY_LIST) {
    return right;
  }
  if (right == EMPTY_LIST) {
    return left;
  }
  SkylarkType type=SkylarkType.intersection(left.contentType,right.contentType);
  if (type == SkylarkType.BOTTOM) {
    throw new EvalException(loc,String.format("cannot concatenate list of %s with list of %s",left.contentType,right.contentType));
  }
  return new ConcatenatedSkylarkList(left,right,left.isTuple(),type);
}
