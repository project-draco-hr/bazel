{
  this.clock=clock;
  workspace=fs.getPath("/workspace");
  workspace.createDirectory();
  outputBase=fs.getPath("/output_base");
  outputBase.createDirectory();
  addFile("WORKSPACE");
  skyframeExecutor=SequencedSkyframeExecutor.create(TestConstants.PACKAGE_FACTORY_FACTORY_FOR_TESTING.create(TestRuleClassProvider.getRuleClassProvider(),fs),new BlazeDirectories(fs.getPath("/install"),fs.getPath("/output"),workspace,TestConstants.PRODUCT_NAME),null,null,TestRuleClassProvider.getRuleClassProvider().getBuildInfoFactories(),ImmutableList.of(new ManualDiffAwarenessFactory()),Predicates.<PathFragment>alwaysFalse(),supplier,ImmutableMap.<SkyFunctionName,SkyFunction>of(),ImmutableList.<PrecomputedValue.Injected>of(),ImmutableList.<SkyValueDirtinessChecker>of(),TestConstants.PRODUCT_NAME);
  skyframeExecutor.preparePackageLoading(new PathPackageLocator(outputBase,ImmutableList.of(workspace)),ConstantRuleVisibility.PUBLIC,true,7,"",UUID.randomUUID(),new TimestampGranularityMonitor(BlazeClock.instance()));
}
