{
  clock.advanceMillis(1);
  modifiedFileSet=getModifiedFileSet();
  skyframeExecutor.preparePackageLoading(new PathPackageLocator(outputBase,ImmutableList.of(workspace)),ConstantRuleVisibility.PUBLIC,true,7,"",UUID.randomUUID(),ImmutableMap.<String,String>of(),new TimestampGranularityMonitor(BlazeClock.instance()));
  skyframeExecutor.invalidateFilesUnderPathForTesting(new Reporter(),modifiedFileSet,workspace);
  ((SequencedSkyframeExecutor)skyframeExecutor).handleDiffs(new Reporter());
  changes.clear();
}
