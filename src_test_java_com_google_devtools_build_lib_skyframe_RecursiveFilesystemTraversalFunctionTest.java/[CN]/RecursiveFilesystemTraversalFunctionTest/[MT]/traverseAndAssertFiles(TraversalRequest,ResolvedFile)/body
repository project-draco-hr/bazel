{
  Set<ResolvedFile> expectedMap=new HashSet<>();
  for (  ResolvedFile exp : expectedFilesIgnoringMetadata) {
    expectedMap.add(exp.stripMetadataForTesting());
  }
  RecursiveFilesystemTraversalValue result=evalTraversalRequest(params);
  Set<ResolvedFile> actualMap=new HashSet<>();
  for (  ResolvedFile act : result.getTransitiveFiles()) {
    actualMap.add(act.stripMetadataForTesting());
  }
  assertThat(expectedMap).isEqualTo(actualMap);
  return result;
}
