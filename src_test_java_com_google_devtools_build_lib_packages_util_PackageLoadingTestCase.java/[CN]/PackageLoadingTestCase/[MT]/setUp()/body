{
  super.setUp();
  ruleClassProvider=TestRuleClassProvider.getRuleClassProvider();
  skyframeExecutor=SequencedSkyframeExecutor.create(reporter,new PackageFactory(ruleClassProvider,getEnvironmentExtensions()),new TimestampGranularityMonitor(BlazeClock.instance()),new BlazeDirectories(outputBase,outputBase,rootDirectory),null,ruleClassProvider.getBuildInfoFactories(),ImmutableSet.<Path>of(),ImmutableList.<DiffAwareness.Factory>of(),Predicates.<PathFragment>alwaysFalse(),Preprocessor.Factory.Supplier.NullSupplier.INSTANCE,ImmutableMap.<SkyFunctionName,SkyFunction>of(),ImmutableList.<PrecomputedValue.Injected>of());
  skyframeExecutor.preparePackageLoading(new PathPackageLocator(rootDirectory),ConstantRuleVisibility.PUBLIC,true,"",UUID.randomUUID());
  setUpSkyframe(parsePackageCacheOptions());
}
