{
  StoredEventHandler eventHandler=new StoredEventHandler();
  BuildLangTypedAttributeValuesMap attributeValues=new BuildLangTypedAttributeValuesMap(kwargs);
  Rule tempRule=RuleFactory.createRule(pkg,ruleClass,attributeValues,eventHandler,ast,ast.getLocation(),null);
  pkg.addEvents(eventHandler.getEvents());
  overwriteRule(pkg,tempRule);
  for (  Map.Entry<String,Label> entry : ruleClass.getExternalBindingsFunction().apply(tempRule).entrySet()) {
    Label nameLabel=Label.parseAbsolute("//external:" + entry.getKey());
    addBindRule(pkg,bindRuleClass,nameLabel,entry.getValue(),tempRule.getLocation());
  }
  return this;
}
