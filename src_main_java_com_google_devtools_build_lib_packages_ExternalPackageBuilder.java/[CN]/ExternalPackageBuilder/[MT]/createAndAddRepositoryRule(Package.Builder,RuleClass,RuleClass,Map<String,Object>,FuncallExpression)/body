{
  StoredEventHandler eventHandler=new StoredEventHandler();
  Rule tempRule=RuleFactory.createRule(pkg,ruleClass,kwargs,eventHandler,ast,ast.getLocation(),null);
  pkg.addEvents(eventHandler.getEvents());
  repositoryMap.put(PackageIdentifier.RepositoryName.create("@" + tempRule.getName()),tempRule);
  for (  Map.Entry<String,Label> entry : ruleClass.getExternalBindingsFunction().apply(tempRule).entrySet()) {
    Label nameLabel=Label.parseAbsolute("//external:" + entry.getKey());
    addBindRule(pkg,bindRuleClass,nameLabel,entry.getValue(),tempRule.getLocation());
  }
  return this;
}
