{
  PathFragment runfilesDir=getRunfilesDirectoryExecPath();
  if (runfilesDir != null) {
    PathFragment sourcesManifestPath=runfilesDir.getRelative("SOURCES");
    Artifact sourceOnlyManifest=context.getAnalysisEnvironment().getDerivedArtifact(sourcesManifestPath,context.getConfiguration().getBinDirectory());
    context.getAnalysisEnvironment().registerAction(SourceManifestAction.forRunfiles(ManifestType.SOURCES_ONLY,context.getActionOwner(),sourceOnlyManifest,runfiles));
    return sourceOnlyManifest;
  }
 else {
    return null;
  }
}
