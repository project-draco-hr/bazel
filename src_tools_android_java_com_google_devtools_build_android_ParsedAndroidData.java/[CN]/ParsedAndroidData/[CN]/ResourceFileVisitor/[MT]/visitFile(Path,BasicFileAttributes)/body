{
  try {
    if (!Files.isDirectory(path) && !path.getFileName().toString().startsWith(".")) {
      if (folderType == ResourceFolderType.VALUES) {
        DataResourceXml.parse(xmlInputFactory,path,fqnFactory,overwritingConsumer,combiningResources);
      }
 else       if (folderType != null) {
        String rawFqn=deriveRawFullyQualifiedName(path);
        FullyQualifiedName key=fqnFactory.parse(rawFqn);
        if (parseIds && ID_PROVIDING_RESOURCE_TYPES.contains(folderType) && path.getFileName().toString().endsWith(SdkConstants.DOT_XML)) {
          DataValueFileWithIds.parse(xmlInputFactory,path,key,fqnFactory,overwritingConsumer,combiningResources);
        }
 else {
          overwritingConsumer.consume(key,DataValueFile.of(path));
        }
      }
    }
  }
 catch (  IllegalArgumentException|XMLStreamException e) {
    errors.add(e);
  }
  return super.visitFile(path,attrs);
}
