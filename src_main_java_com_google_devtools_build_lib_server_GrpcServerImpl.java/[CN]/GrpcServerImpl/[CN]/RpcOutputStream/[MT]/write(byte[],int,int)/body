{
  ByteString input=ByteString.copyFrom(b,off,inlen);
  RunResponse.Builder response=RunResponse.newBuilder().setCookie(responseCookie).setCommandId(commandId);
switch (type) {
case STDOUT:
    response.setStandardOutput(input);
  break;
case STDERR:
response.setStandardError(input);
break;
default :
throw new IllegalStateException();
}
observer.onNext(response.build());
}
