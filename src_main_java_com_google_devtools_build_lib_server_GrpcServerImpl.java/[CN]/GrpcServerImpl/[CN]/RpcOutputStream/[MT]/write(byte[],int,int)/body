{
  ByteString input=ByteString.copyFrom(b,off,inlen);
  RunResponse.Builder response=RunResponse.newBuilder().setCookie(responseCookie);
switch (type) {
case STDOUT:
    response.setStdout(input);
  break;
case STDERR:
response.setStderr(input);
break;
default :
throw new IllegalStateException();
}
observer.onNext(response.build());
}
