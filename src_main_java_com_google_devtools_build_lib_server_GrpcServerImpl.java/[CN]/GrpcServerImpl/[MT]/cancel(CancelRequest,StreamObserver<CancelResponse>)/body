{
  if (!request.getCookie().equals(requestCookie)) {
    streamObserver.onCompleted();
    return;
  }
  try (RunningCommand cancelCommand=new RunningCommand()){
synchronized (runningCommands) {
      RunningCommand pendingCommand=runningCommands.get(request.getCommandId());
      if (pendingCommand != null) {
        pendingCommand.thread.interrupt();
      }
      startSlowInterruptWatcher(ImmutableSet.of(request.getCommandId()));
    }
    streamObserver.onNext(CancelResponse.newBuilder().setCookie(responseCookie).build());
    streamObserver.onCompleted();
  }
 }
