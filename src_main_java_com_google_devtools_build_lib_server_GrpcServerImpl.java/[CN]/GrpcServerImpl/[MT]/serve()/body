{
  Preconditions.checkState(!serving);
  server=ServerBuilder.forPort(port).addService(CommandServerGrpc.bindService(this)).build();
  server.start();
  if (port == 0) {
    port=getActualServerPort();
  }
  PrintWriter portWriter=new PrintWriter(portFile);
  portWriter.print(port);
  portWriter.close();
  serving=true;
}
