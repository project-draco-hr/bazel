{
  OptionsParser parser=OptionsParser.newOptionsParser(PlMergeOptions.class);
  parser.parse(args);
  PlMergeOptions options=parser.getOptions(PlMergeOptions.class);
  if (options.sourceFiles.isEmpty()) {
    missingArg("At least one --source_file");
  }
  if (options.outFile == null) {
    missingArg("--out_file");
  }
  FileSystem fileSystem=FileSystems.getDefault();
  List<Path> sourceFilePaths=new ArrayList<>();
  for (  String sourceFile : options.sourceFiles) {
    sourceFilePaths.add(fileSystem.getPath(sourceFile));
  }
  PlistMerging merging=PlistMerging.from(sourceFilePaths,ImmutableMap.<String,NSObject>of(),ImmutableMap.<String,String>of(),new KeysToRemoveIfEmptyString());
  if (options.primaryBundleId != null || options.fallbackBundleId != null) {
    merging.setBundleIdentifier(options.primaryBundleId,options.fallbackBundleId);
  }
  merging.writePlist(fileSystem.getPath(options.outFile));
}
