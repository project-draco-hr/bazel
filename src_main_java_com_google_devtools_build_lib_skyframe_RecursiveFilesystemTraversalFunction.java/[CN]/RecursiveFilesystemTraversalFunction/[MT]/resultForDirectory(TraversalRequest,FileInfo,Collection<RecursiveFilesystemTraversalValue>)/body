{
  NestedSetBuilder<ResolvedFile> paths=NestedSetBuilder.stableOrder();
  for (  RecursiveFilesystemTraversalValue child : subdirTraversals) {
    paths.addTransitive(child.getTransitiveFiles());
  }
  ResolvedFile root;
  if (rootInfo.type.isSymlink()) {
    root=ResolvedFileFactory.symlinkToDirectory(rootInfo.realPath,traversal.path,rootInfo.unresolvedSymlinkTarget,rootInfo.metadata);
    paths.add(root);
  }
 else {
    root=ResolvedFileFactory.directory(rootInfo.realPath);
  }
  return RecursiveFilesystemTraversalValue.of(root,paths.build());
}
