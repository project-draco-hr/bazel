{
  StoredEventHandler handler=new StoredEventHandler();
  DefaultModelResolver modelResolver=Mockito.mock(DefaultModelResolver.class);
  Resolver resolver=new Resolver(handler,modelResolver);
  resolver.resolveArtifact("x:y:1.2.3");
  ByteArrayOutputStream baos=new ByteArrayOutputStream();
  PrintStream ps=new PrintStream(baos);
  resolver.writeWorkspace(ps);
  String content=baos.toString(String.valueOf(Charset.defaultCharset()));
  assertThat(content).contains("maven_jar(\n" + "    name = \"x_y\",\n" + "    artifact = \"x:y:1.2.3\",\n"+ ")");
  assertThat(handler.hasErrors()).isFalse();
}
