{
  ImmutableSet.Builder<PathFragment> excludedPathsBuilder=ImmutableSet.builder();
  excludedPathsBuilder.addAll(getExcludedSubdirectories());
  for (  PathFragment blacklistedPackagePrefix : blacklistedPackagePrefixes) {
    PackageIdentifier pkgIdForBlacklistedDirectorPrefix=PackageIdentifier.create(parsedPattern.getDirectory().getRepository(),blacklistedPackagePrefix);
    if (parsedPattern.containsBelowDirectory(pkgIdForBlacklistedDirectorPrefix)) {
      excludedPathsBuilder.add(blacklistedPackagePrefix);
    }
  }
  return excludedPathsBuilder.build();
}
