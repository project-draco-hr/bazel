{
  int length=pattern.length();
  boolean afterPercent=false;
  int i=0;
  int count=0;
  while (i < length) {
switch (pattern.charAt(i)) {
case 's':
case 'd':
      if (afterPercent) {
        count++;
        afterPercent=false;
      }
    break;
case '%':
  afterPercent=!afterPercent;
break;
default :
if (afterPercent) {
throw new MissingFormatWidthException("invalid arguments for format string");
}
afterPercent=false;
break;
}
i++;
}
return count;
}
