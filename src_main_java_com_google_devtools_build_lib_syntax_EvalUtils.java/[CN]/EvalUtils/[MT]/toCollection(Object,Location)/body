{
  if (o instanceof Collection) {
    return (Collection<Object>)o;
  }
 else   if (o instanceof SkylarkList) {
    return ((SkylarkList)o).getList();
  }
 else   if (o instanceof Map<?,?>) {
    Map<Comparable<?>,Object> dict=(Map<Comparable<?>,Object>)o;
    try {
      return Ordering.from(SKYLARK_COMPARATOR).sortedCopy(dict.keySet());
    }
 catch (    ComparisonException e) {
      throw new EvalException(loc,e);
    }
  }
 else   if (o instanceof SkylarkNestedSet) {
    return ((SkylarkNestedSet)o).toCollection();
  }
 else {
    throw new EvalException(loc,"type '" + getDataTypeName(o) + "' is not a collection");
  }
}
