{
  if (o instanceof Collection) {
    return (Collection<Object>)o;
  }
 else   if (o instanceof Map<?,?>) {
    return ((Map<Object,Object>)o).keySet();
  }
 else   if (o instanceof SkylarkNestedSet) {
    return ((SkylarkNestedSet)o).toCollection();
  }
 else {
    throw new EvalException(loc,"type '" + EvalUtils.getDatatypeName(o) + "' is not a collection");
  }
}
