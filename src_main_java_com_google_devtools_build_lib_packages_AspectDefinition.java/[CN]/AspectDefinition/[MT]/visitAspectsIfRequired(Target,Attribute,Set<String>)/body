{
  if (advertisedProviders.isEmpty()) {
    return ImmutableMultimap.of();
  }
  LinkedHashMultimap<Attribute,Label> result=LinkedHashMultimap.create();
  for (  AspectClass candidateClass : attribute.getAspects()) {
    if (!advertisedProviders.containsAll(candidateClass.getDefinition().getRequiredProviderNames())) {
      continue;
    }
    addAllAttributesOfAspect((Rule)from,result,candidateClass.getDefinition(),Rule.ALL_DEPS);
  }
  return ImmutableMultimap.copyOf(result);
}
