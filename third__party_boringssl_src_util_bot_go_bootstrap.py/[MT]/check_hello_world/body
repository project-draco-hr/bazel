def check_hello_world(toolset_root):
    "Compiles and runs 'hello world' program to verify that toolset works."
    with temp_dir(toolset_root) as tmp:
        path = os.path.join(tmp, 'hello.go')
        write_file([path], '\n        package main\n        func main() { println("hello, world\\n") }\n    ')
        out = subprocess.check_output([get_go_exe(toolset_root), 'run', path], env=get_go_environ(toolset_root, tmp), stderr=subprocess.STDOUT)
        if (out.strip() != 'hello, world'):
            LOGGER.error('Failed to run sample program:\n%s', out)
            return False
        return True
