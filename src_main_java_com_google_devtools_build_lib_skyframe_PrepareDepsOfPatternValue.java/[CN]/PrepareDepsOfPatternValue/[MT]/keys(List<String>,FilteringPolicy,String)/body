{
  Iterable<TargetPatternSkyKeyOrException> keysMaybe=TargetPatternValue.keys(patterns,policy,offset);
  ImmutableList.Builder<PrepareDepsOfPatternSkyKeyOrException> builder=ImmutableList.builder();
  for (  TargetPatternSkyKeyOrException keyMaybe : keysMaybe) {
    try {
      SkyKey skyKey=keyMaybe.getSkyKey();
      if (!((TargetPatternKey)skyKey.argument()).isNegative()) {
        builder.add(new PrepareDepsOfPatternSkyKeyOrExceptionImpl(keyMaybe));
      }
    }
 catch (    TargetParsingException e) {
      builder.add(new PrepareDepsOfPatternSkyKeyOrExceptionImpl(keyMaybe));
    }
  }
  return builder.build();
}
