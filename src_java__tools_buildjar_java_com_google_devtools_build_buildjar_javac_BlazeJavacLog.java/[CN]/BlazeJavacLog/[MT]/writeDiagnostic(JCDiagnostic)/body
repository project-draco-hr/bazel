{
switch (diag.getKind()) {
case NOTE:
    if (shouldDisplayNote(diag)) {
      super.writeDiagnostic(diag);
    }
  break;
case ERROR:
hadError=true;
super.writeDiagnostic(diag);
break;
default :
if (!hadError) {
super.writeDiagnostic(diag);
}
}
}
