{
  PathFragment relativePath=new PathFragment(entry.getName());
  if (relativePath.isAbsolute()) {
    throw new DecompressorException(String.format("Failed to extract %s, zipped paths cannot be absolute",relativePath));
  }
  Path outputPath=destinationDirectory.getRelative(relativePath);
  FileSystemUtils.createDirectoryAndParents(outputPath.getParentDirectory());
  if (entry.isDirectory()) {
    FileSystemUtils.createDirectoryAndParents(outputPath);
  }
 else {
    try (OutputStream out=new FileOutputStream(new File(outputPath.getPathString()))){
      IOUtils.copy(in,out);
    }
 catch (    IOException e) {
      throw new DecompressorException(String.format("Error writing %s from %s",outputPath,archiveFile));
    }
  }
}
