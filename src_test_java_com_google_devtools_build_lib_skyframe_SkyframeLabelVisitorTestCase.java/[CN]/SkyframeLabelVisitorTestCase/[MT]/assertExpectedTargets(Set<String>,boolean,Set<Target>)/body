{
  assertEquals(asLabelSet(expectedLabels),getVisitedTargets(startingTargets));
  Set<PathFragment> expectedPkgs=new HashSet<>();
  for (  Label label : getVisitedTargets(startingTargets)) {
    expectedPkgs.add(label.getPackageFragment());
  }
  assertEquals(expectedPkgs,getVisitedPackageNames(startingTargets));
  if (!expectError) {
    Set<PathFragment> visitedPkgs=new HashSet<>();
    for (    Package pkg : getErrorFreeVisitedPackages(startingTargets)) {
      visitedPkgs.add(pkg.getNameFragment());
    }
    assertEquals(expectedPkgs,visitedPkgs);
  }
}
