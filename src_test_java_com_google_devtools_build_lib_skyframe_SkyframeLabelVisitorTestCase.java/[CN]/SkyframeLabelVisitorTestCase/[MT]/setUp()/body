{
  super.setUp();
  this.skyframeExecutor=SequencedSkyframeExecutor.create(new PackageFactory(ruleClassProvider,getPackageEnvironmentExtension()),new TimestampGranularityMonitor(BlazeClock.instance()),new BlazeDirectories(outputBase,outputBase,rootDirectory),null,null,ruleClassProvider.getBuildInfoFactories(),ImmutableSet.<Path>of(),ImmutableList.<DiffAwareness.Factory>of(),Predicates.<PathFragment>alwaysFalse(),preprocessorFactorySupplier,ImmutableMap.<SkyFunctionName,SkyFunction>of(),ImmutableList.<PrecomputedValue.Injected>of(),ImmutableList.<SkyValueDirtinessChecker>of());
  skyframeExecutor.preparePackageLoading(new PathPackageLocator(outputBase,ImmutableList.of(rootDirectory)),ConstantRuleVisibility.PRIVATE,true,7,ruleClassProvider.getDefaultsPackageContent(),UUID.randomUUID());
  this.visitor=skyframeExecutor.pkgLoader();
}
