{
  String filename="/usr/local/blah/blah/genhello/hello.d";
  PathFragment file1=new PathFragment("/usr/local/blah/blah/genhello/hello.cc");
  PathFragment file2=new PathFragment("/usr/local/blah/blah/genhello/hello.h");
  PathFragment file3=new PathFragment("/usr/local/blah/blah/genhello/other.h");
  DependencySet depSet1=newDependencySet();
  depSet1.addDependency(file1);
  depSet1.addDependency(file2);
  depSet1.addDependency(file3);
  depSet1.setOutputFileName(filename);
  Path dotd=scratch.resolve(filename);
  FileSystemUtils.createDirectoryAndParents(dotd.getParentDirectory());
  depSet1.write(dotd,".d");
  DependencySet depSet2=newDependencySet().read(dotd);
  assertEquals(depSet1,depSet2);
  assertEquals(depSet1.getOutputFileName(),"/" + depSet2.getOutputFileName());
}
