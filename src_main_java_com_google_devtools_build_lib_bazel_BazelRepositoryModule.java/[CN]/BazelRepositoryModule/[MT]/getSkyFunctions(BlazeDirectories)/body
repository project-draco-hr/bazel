{
  ImmutableMap.Builder<SkyFunctionName,SkyFunction> builder=ImmutableMap.builder();
  for (  RepositoryFunction handler : repositoryHandlers.values()) {
    builder.put(handler.getSkyFunctionName(),handler);
  }
  builder.put(SkyFunctions.REPOSITORY,new RepositoryDelegatorFunction(directories,repositoryHandlers,isFetch));
  downloadFunction=new HttpDownloadFunction();
  builder.put(SkyFunctionName.create(HttpDownloadFunction.NAME),downloadFunction);
  builder.put(JarFunction.NAME,new JarFunction());
  builder.put(ZipFunction.NAME,new ZipFunction());
  return builder.build();
}
