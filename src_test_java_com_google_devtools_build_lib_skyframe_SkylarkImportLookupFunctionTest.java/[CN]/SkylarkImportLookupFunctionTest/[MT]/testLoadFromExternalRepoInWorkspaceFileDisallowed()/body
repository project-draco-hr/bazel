{
  scratch.deleteFile("tools/build_rules/prelude_blaze");
  scratch.overwriteFile("WORKSPACE","local_repository(","    name = 'a_remote_repo',","    path = '/a_remote_repo'",")");
  scratch.file("/a_remote_repo/remote_pkg/BUILD");
  scratch.file("/a_remote_repo/remote_pkg/ext.bzl","CONST = 17");
  SkyKey skylarkImportLookupKey=SkylarkImportLookupValue.key(Label.parseAbsoluteUnchecked("@a_remote_repo//remote_pkg:ext.bzl"),true);
  EvaluationResult<SkylarkImportLookupValue> result=SkyframeExecutorTestUtils.evaluate(getSkyframeExecutor(),skylarkImportLookupKey,false,reporter);
  assertTrue(result.hasError());
  ErrorInfo errorInfo=result.getError(skylarkImportLookupKey);
  String errorMessage=errorInfo.getException().getMessage();
  String expectedMsgTemplate=SkylarkImportFailedException.NO_EXT_WORKSPACE_LOAD_MSG_TEMPLATE;
  assertEquals(String.format(expectedMsgTemplate,"@a_remote_repo//remote_pkg:ext.bzl"),errorMessage);
}
