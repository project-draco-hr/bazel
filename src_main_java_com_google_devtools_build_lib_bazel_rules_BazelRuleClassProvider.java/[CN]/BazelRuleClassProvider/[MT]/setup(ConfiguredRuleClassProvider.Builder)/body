{
  builder.addBuildInfoFactory(new BazelJavaBuildInfoFactory()).setConfigurationCollectionFactory(new BazelConfigurationCollection()).setPrerequisiteValidator(new BazelPrerequisiteValidator()).setSkylarkAccessibleJavaClasses(skylarkBuiltinJavaObects);
  for (  Class<? extends FragmentOptions> fragmentOptions : BUILD_OPTIONS) {
    builder.addConfigurationOptions(fragmentOptions);
  }
  builder.addRuleDefinition(new WorkspaceBaseRule());
  builder.addRuleDefinition(new BaseRuleClasses.BaseRule());
  builder.addRuleDefinition(new BaseRuleClasses.RuleBase());
  builder.addRuleDefinition(new BazelBaseRuleClasses.BinaryBaseRule());
  builder.addRuleDefinition(new BaseRuleClasses.TestBaseRule());
  builder.addRuleDefinition(new BazelBaseRuleClasses.ErrorRule());
  builder.addRuleDefinition(new EnvironmentRule());
  builder.addRuleDefinition(new ConfigRuleClasses.ConfigBaseRule());
  builder.addRuleDefinition(new ConfigRuleClasses.ConfigSettingRule());
  builder.addRuleDefinition(new BazelFilegroupRule());
  builder.addRuleDefinition(new BazelTestSuiteRule());
  builder.addRuleDefinition(new BazelGenRuleRule());
  builder.addRuleDefinition(new GenQueryRule());
  builder.addRuleDefinition(new BazelShRuleClasses.ShRule());
  builder.addRuleDefinition(new BazelShLibraryRule());
  builder.addRuleDefinition(new BazelShBinaryRule());
  builder.addRuleDefinition(new BazelShTestRule());
  builder.addRuleDefinition(new CcToolchainRule());
  builder.addRuleDefinition(new BazelCppRuleClasses.CcLinkingRule());
  builder.addRuleDefinition(new BazelCppRuleClasses.CcDeclRule());
  builder.addRuleDefinition(new BazelCppRuleClasses.CcBaseRule());
  builder.addRuleDefinition(new BazelCppRuleClasses.CcRule());
  builder.addRuleDefinition(new BazelCppRuleClasses.CcBinaryBaseRule());
  builder.addRuleDefinition(new BazelCppRuleClasses.CcBinaryRule());
  builder.addRuleDefinition(new BazelCppRuleClasses.CcTestRule());
  builder.addRuleDefinition(new BazelCppRuleClasses.CcLibraryBaseRule());
  builder.addRuleDefinition(new BazelCppRuleClasses.CcLibraryRule());
  builder.addWorkspaceFile(BazelJavaRuleClasses.getDefaultWorkspace());
  builder.addRuleDefinition(new BazelJavaRuleClasses.BaseJavaBinaryRule());
  builder.addRuleDefinition(new BazelJavaRuleClasses.IjarBaseRule());
  builder.addRuleDefinition(new BazelJavaRuleClasses.JavaBaseRule());
  builder.addRuleDefinition(new JavaImportBaseRule());
  builder.addRuleDefinition(new BazelJavaRuleClasses.JavaRule());
  builder.addRuleDefinition(new BazelJavaBinaryRule());
  builder.addRuleDefinition(new BazelJavaLibraryRule());
  builder.addRuleDefinition(new BazelJavaImportRule());
  builder.addRuleDefinition(new BazelJavaTestRule());
  builder.addRuleDefinition(new BazelJavaPluginRule());
  builder.addRuleDefinition(new JavaToolchainRule());
  builder.addRuleDefinition(new BazelIosTestRule());
  builder.addRuleDefinition(new IosDeviceRule());
  builder.addRuleDefinition(new ObjcBinaryRule());
  builder.addRuleDefinition(new ObjcBundleRule());
  builder.addRuleDefinition(new ObjcBundleLibraryRule());
  builder.addRuleDefinition(new ObjcFrameworkRule());
  builder.addRuleDefinition(new ObjcImportRule());
  builder.addRuleDefinition(new ObjcLibraryRule());
  builder.addRuleDefinition(new ObjcOptionsRule());
  builder.addRuleDefinition(new ObjcProtoLibraryRule());
  builder.addRuleDefinition(new ObjcXcodeprojRule());
  builder.addRuleDefinition(new ObjcRuleClasses.CoptsRule());
  builder.addRuleDefinition(new ObjcRuleClasses.ObjcProtoRule());
  builder.addRuleDefinition(new ObjcRuleClasses.IosTestBaseRule());
  builder.addRuleDefinition(new ObjcRuleClasses.BundlingRule());
  builder.addRuleDefinition(new ObjcRuleClasses.ReleaseBundlingRule());
  builder.addRuleDefinition(new ObjcRuleClasses.SimulatorRule());
  builder.addRuleDefinition(new ObjcRuleClasses.CompilingRule());
  builder.addRuleDefinition(new ObjcRuleClasses.LinkingRule());
  builder.addRuleDefinition(new ObjcRuleClasses.ResourcesRule());
  builder.addRuleDefinition(new ObjcRuleClasses.XcodegenRule());
  builder.addRuleDefinition(new ObjcRuleClasses.AlwaysLinkRule());
  builder.addRuleDefinition(new ObjcRuleClasses.OptionsRule());
  builder.addRuleDefinition(new ObjcRuleClasses.SdkFrameworksDependerRule());
  builder.addRuleDefinition(new ObjcRuleClasses.CompileDependencyRule());
  builder.addRuleDefinition(new ObjcRuleClasses.ResourceToolsRule());
  builder.addRuleDefinition(new IosApplicationRule());
  builder.addRuleDefinition(new IosExtensionBinaryRule());
  builder.addRuleDefinition(new IosExtensionRule());
  builder.addRuleDefinition(new BazelExtraActionRule());
  builder.addRuleDefinition(new BazelActionListenerRule());
  builder.addRuleDefinition(new BindRule());
  builder.addRuleDefinition(new HttpArchiveRule());
  builder.addRuleDefinition(new HttpJarRule());
  builder.addRuleDefinition(new LocalRepositoryRule());
  builder.addRuleDefinition(new MavenJarRule());
  builder.addRuleDefinition(new NewHttpArchiveRule());
  builder.addRuleDefinition(new NewLocalRepositoryRule());
  builder.addConfigurationFragment(new BazelConfiguration.Loader());
  builder.addConfigurationFragment(new CppConfigurationLoader(Functions.<String>identity()));
  builder.addConfigurationFragment(new JvmConfigurationLoader(JAVA_CPU_SUPPLIER));
  builder.addConfigurationFragment(new JavaConfigurationLoader(JAVA_CPU_SUPPLIER));
  builder.addConfigurationFragment(new ObjcConfigurationLoader());
}
