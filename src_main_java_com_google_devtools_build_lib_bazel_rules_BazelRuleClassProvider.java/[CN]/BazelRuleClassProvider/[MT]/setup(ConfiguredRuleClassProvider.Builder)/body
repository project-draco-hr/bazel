{
  builder.addBuildInfoFactory(new BazelJavaBuildInfoFactory()).addBuildInfoFactory(new CppBuildInfo()).addBuildInfoFactory(new ObjcBuildInfoFactory()).setConfigurationCollectionFactory(new BazelConfigurationCollection()).setPrelude("//tools/build_rules:prelude_bazel").setRunfilesPrefix("").setToolsRepository(TOOLS_REPOSITORY).setPrerequisiteValidator(new BazelPrerequisiteValidator()).setSkylarkAccessibleTopLevels(skylarkBuiltinJavaObects);
  builder.addBuildOptions(BUILD_OPTIONS);
  for (  Class<? extends FragmentOptions> fragmentOptions : BUILD_OPTIONS) {
    builder.addConfigurationOptions(fragmentOptions);
  }
  AndroidNeverlinkAspect androidNeverlinkAspect=new AndroidNeverlinkAspect();
  DexArchiveAspect dexArchiveAspect=new DexArchiveAspect(TOOLS_REPOSITORY);
  JackAspect jackAspect=new JackAspect(TOOLS_REPOSITORY);
  BazelJ2ObjcProtoAspect bazelJ2ObjcProtoAspect=new BazelJ2ObjcProtoAspect(TOOLS_REPOSITORY);
  J2ObjcAspect j2ObjcAspect=new J2ObjcAspect(TOOLS_REPOSITORY,bazelJ2ObjcProtoAspect);
  AndroidStudioInfoAspect androidStudioInfoAspect=new AndroidStudioInfoAspect(TOOLS_REPOSITORY,new BazelAndroidStudioInfoSemantics());
  builder.addNativeAspectClass(androidNeverlinkAspect);
  builder.addNativeAspectClass(dexArchiveAspect);
  builder.addNativeAspectClass(jackAspect);
  builder.addNativeAspectClass(bazelJ2ObjcProtoAspect);
  builder.addNativeAspectClass(j2ObjcAspect);
  builder.addNativeAspectClass(androidStudioInfoAspect);
  builder.addRuleDefinition(new WorkspaceBaseRule());
  builder.addRuleDefinition(new BaseRuleClasses.BaseRule());
  builder.addRuleDefinition(new BaseRuleClasses.RuleBase());
  builder.addRuleDefinition(new BazelBaseRuleClasses.BinaryBaseRule());
  builder.addRuleDefinition(new BaseRuleClasses.TestBaseRule());
  builder.addRuleDefinition(new BazelBaseRuleClasses.ErrorRule());
  builder.addRuleDefinition(new EnvironmentRule());
  builder.addRuleDefinition(new ConfigRuleClasses.ConfigBaseRule());
  builder.addRuleDefinition(new ConfigRuleClasses.ConfigSettingRule());
  builder.addRuleDefinition(new BazelFilegroupRule());
  builder.addRuleDefinition(new BazelTestSuiteRule());
  builder.addRuleDefinition(new BazelGenRuleRule());
  builder.addRuleDefinition(new GenQueryRule());
  builder.addRuleDefinition(new BazelShRuleClasses.ShRule());
  builder.addRuleDefinition(new BazelShLibraryRule());
  builder.addRuleDefinition(new BazelShBinaryRule());
  builder.addRuleDefinition(new BazelShTestRule());
  builder.addRuleDefinition(new BazelProtoLibraryRule());
  builder.addRuleDefinition(new CcToolchainRule());
  builder.addRuleDefinition(new AppleCcToolchainRule());
  builder.addRuleDefinition(new CcToolchainSuiteRule());
  builder.addRuleDefinition(new CcIncLibraryRule());
  builder.addRuleDefinition(new BazelCppRuleClasses.CcLinkingRule());
  builder.addRuleDefinition(new BazelCppRuleClasses.CcDeclRule());
  builder.addRuleDefinition(new BazelCppRuleClasses.CcBaseRule());
  builder.addRuleDefinition(new BazelCppRuleClasses.CcRule());
  builder.addRuleDefinition(new BazelCppRuleClasses.CcBinaryBaseRule());
  builder.addRuleDefinition(new BazelCppRuleClasses.CcBinaryRule());
  builder.addRuleDefinition(new BazelCppRuleClasses.CcTestRule());
  builder.addRuleDefinition(new BazelCppRuleClasses.CcLibraryBaseRule());
  builder.addRuleDefinition(new BazelCppRuleClasses.CcLibraryRule());
  builder.addRuleDefinition(new BazelCppRuleClasses.BazelCcIncLibraryRule());
  builder.addRuleDefinition(new BazelPyRuleClasses.PyBaseRule());
  builder.addRuleDefinition(new BazelPyRuleClasses.PyBinaryBaseRule());
  builder.addRuleDefinition(new BazelPyLibraryRule());
  builder.addRuleDefinition(new BazelPyBinaryRule());
  builder.addRuleDefinition(new BazelPyTestRule());
  try {
    builder.addWorkspaceFilePrefix(ResourceFileLoader.loadResource(BazelRuleClassProvider.class,"tools.WORKSPACE"));
    builder.addWorkspaceFilePrefix(ResourceFileLoader.loadResource(BazelJavaRuleClasses.class,"jdk.WORKSPACE"));
    builder.addWorkspaceFilePrefix(ResourceFileLoader.loadResource(BazelAndroidSemantics.class,"android.WORKSPACE"));
    builder.addWorkspaceFilePrefix(ResourceFileLoader.loadResource(BazelJ2ObjcLibraryRule.class,"j2objc.WORKSPACE"));
  }
 catch (  IOException e) {
    throw new IllegalStateException(e);
  }
  builder.addRuleDefinition(new BazelJavaRuleClasses.BaseJavaBinaryRule());
  builder.addRuleDefinition(new BazelJavaRuleClasses.IjarBaseRule());
  builder.addRuleDefinition(new BazelJavaRuleClasses.JavaBaseRule());
  builder.addRuleDefinition(new ProguardLibraryRule());
  builder.addRuleDefinition(new JavaImportBaseRule());
  builder.addRuleDefinition(new BazelJavaRuleClasses.JavaRule());
  builder.addRuleDefinition(new BazelJavaBinaryRule());
  builder.addRuleDefinition(new BazelJavaLibraryRule());
  builder.addRuleDefinition(new BazelJavaImportRule());
  builder.addRuleDefinition(new BazelJavaTestRule());
  builder.addRuleDefinition(new BazelJavaPluginRule());
  builder.addRuleDefinition(new JavaToolchainRule());
  builder.addRuleDefinition(new AndroidRuleClasses.AndroidSdkRule());
  builder.addRuleDefinition(new BazelAndroidToolsDefaultsJarRule());
  builder.addRuleDefinition(new AndroidRuleClasses.AndroidBaseRule());
  builder.addRuleDefinition(new AndroidRuleClasses.AndroidAaptBaseRule());
  builder.addRuleDefinition(new AndroidRuleClasses.AndroidResourceSupportRule());
  builder.addRuleDefinition(new AndroidRuleClasses.AndroidBinaryBaseRule(androidNeverlinkAspect,dexArchiveAspect,jackAspect));
  builder.addRuleDefinition(new AndroidBinaryOnlyRule());
  builder.addRuleDefinition(new AndroidLibraryBaseRule(androidNeverlinkAspect,jackAspect));
  builder.addRuleDefinition(new BazelAndroidLibraryRule());
  builder.addRuleDefinition(new BazelAndroidBinaryRule());
  builder.addRuleDefinition(new IosTestRule());
  builder.addRuleDefinition(new IosDeviceRule());
  builder.addRuleDefinition(new AppleBinaryRule());
  builder.addRuleDefinition(new ObjcBinaryRule());
  builder.addRuleDefinition(new ExperimentalObjcLibraryRule());
  builder.addRuleDefinition(new ObjcBundleRule());
  builder.addRuleDefinition(new ObjcBundleLibraryRule());
  builder.addRuleDefinition(new ObjcFrameworkRule());
  builder.addRuleDefinition(new ObjcImportRule());
  builder.addRuleDefinition(new ObjcLibraryRule());
  builder.addRuleDefinition(new ObjcProtoLibraryRule());
  builder.addRuleDefinition(new ObjcXcodeprojRule());
  builder.addRuleDefinition(new ObjcRuleClasses.CoptsRule());
  builder.addRuleDefinition(new ObjcRuleClasses.BundlingRule());
  builder.addRuleDefinition(new ObjcRuleClasses.ReleaseBundlingRule());
  builder.addRuleDefinition(new ObjcRuleClasses.SimulatorRule());
  builder.addRuleDefinition(new ObjcRuleClasses.CompilingRule());
  builder.addRuleDefinition(new ObjcRuleClasses.LinkingRule());
  builder.addRuleDefinition(new ObjcRuleClasses.ResourcesRule());
  builder.addRuleDefinition(new ObjcRuleClasses.XcodegenRule());
  builder.addRuleDefinition(new ObjcRuleClasses.AlwaysLinkRule());
  builder.addRuleDefinition(new ObjcRuleClasses.SdkFrameworksDependerRule());
  builder.addRuleDefinition(new ObjcRuleClasses.CompileDependencyRule());
  builder.addRuleDefinition(new ObjcRuleClasses.ResourceToolsRule());
  builder.addRuleDefinition(new ObjcRuleClasses.XcrunRule());
  builder.addRuleDefinition(new ObjcRuleClasses.IpaRule());
  builder.addRuleDefinition(new ObjcRuleClasses.ReleaseBundlingToolsRule());
  builder.addRuleDefinition(new ObjcRuleClasses.WatchExtensionBundleRule());
  builder.addRuleDefinition(new ObjcRuleClasses.WatchApplicationBundleRule());
  builder.addRuleDefinition(new ObjcRuleClasses.CrosstoolRule());
  builder.addRuleDefinition(new AppleToolchain.RequiresXcodeConfigRule(TOOLS_REPOSITORY));
  builder.addRuleDefinition(new AppleWatch1ExtensionRule());
  builder.addRuleDefinition(new AppleWatchExtensionBinaryRule());
  builder.addRuleDefinition(new IosApplicationRule());
  builder.addRuleDefinition(new IosExtensionBinaryRule());
  builder.addRuleDefinition(new IosExtensionRule());
  builder.addRuleDefinition(new IosFrameworkBinaryRule());
  builder.addRuleDefinition(new IosFrameworkRule());
  builder.addRuleDefinition(new XcodeVersionRule());
  builder.addRuleDefinition(new XcodeConfigRule());
  builder.addRuleDefinition(new J2ObjcLibraryBaseRule());
  builder.addRuleDefinition(new BazelJ2ObjcLibraryRule(j2ObjcAspect));
  builder.addRuleDefinition(new BazelExtraActionRule());
  builder.addRuleDefinition(new BazelActionListenerRule());
  builder.addRuleDefinition(new BindRule());
  builder.addRuleDefinition(new GitRepositoryRule());
  builder.addRuleDefinition(new HttpArchiveRule());
  builder.addRuleDefinition(new HttpJarRule());
  builder.addRuleDefinition(new HttpFileRule());
  builder.addRuleDefinition(new LocalRepositoryRule());
  builder.addRuleDefinition(new MavenJarRule());
  builder.addRuleDefinition(new MavenServerRule());
  builder.addRuleDefinition(new NewHttpArchiveRule());
  builder.addRuleDefinition(new NewGitRepositoryRule());
  builder.addRuleDefinition(new NewLocalRepositoryRule());
  builder.addRuleDefinition(new AndroidSdkRepositoryRule());
  builder.addRuleDefinition(new AndroidNdkRepositoryRule());
  builder.addConfigurationFragment(new BazelConfiguration.Loader());
  builder.addConfigurationFragment(new CppConfigurationLoader(Functions.<String>identity()));
  builder.addConfigurationFragment(new PythonConfigurationLoader(Functions.<String>identity()));
  builder.addConfigurationFragment(new BazelPythonConfiguration.Loader());
  builder.addConfigurationFragment(new JvmConfigurationLoader(false,JAVA_CPU_SUPPLIER));
  builder.addConfigurationFragment(new JavaConfigurationLoader());
  builder.addConfigurationFragment(new ObjcConfigurationLoader());
  builder.addConfigurationFragment(new AppleConfiguration.Loader());
  builder.addConfigurationFragment(new J2ObjcConfiguration.Loader());
  builder.addConfigurationFragment(new AndroidConfiguration.Loader());
  builder.setUniversalConfigurationFragment(BazelConfiguration.class);
}
