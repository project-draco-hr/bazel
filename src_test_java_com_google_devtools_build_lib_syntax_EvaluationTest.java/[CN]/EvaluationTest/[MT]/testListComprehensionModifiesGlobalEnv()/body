{
  Environment env=singletonEnv("x",42);
  assertThat((Iterable<Object>)eval(parseExpr("[x + 1 for x in [1,2,3]]"),env)).containsExactly(2,3,4).inOrder();
  assertEquals(3,env.lookup("x"));
}
