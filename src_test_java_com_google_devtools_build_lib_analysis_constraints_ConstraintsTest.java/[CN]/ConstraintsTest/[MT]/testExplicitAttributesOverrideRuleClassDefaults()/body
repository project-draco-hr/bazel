{
  writeRuleClassDefaultEnvironments();
  String ruleDef="rule_class_default(" + "    name = 'a'," + "    compatible_with = ['//rule_class_restrict:c'],"+ "    restricted_to = ['//rule_class_compat:a'],"+ ")";
  Set<Label> expectedEnvironments=asLabelSet("//rule_class_compat:a","//rule_class_restrict:c","//rule_class_restrict:d");
  assertThat(supportedEnvironments("a",ruleDef)).containsExactlyElementsIn(expectedEnvironments);
}
