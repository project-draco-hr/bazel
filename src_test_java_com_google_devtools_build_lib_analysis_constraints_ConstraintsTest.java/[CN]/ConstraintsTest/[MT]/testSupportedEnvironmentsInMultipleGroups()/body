{
  new EnvironmentGroupMaker("foo_env").setEnvironments("a","b").setDefaults("a").make();
  new EnvironmentGroupMaker("bar_env").setEnvironments("c","d").setDefaults("c").make();
  String ruleDef=getDependencyRule(constrainedTo("//foo_env:b"),compatibleWith("//bar_env:d"));
  assertThat(supportedEnvironments("dep",ruleDef)).containsExactlyElementsIn(asLabelSet("//foo_env:b","//bar_env:c","//bar_env:d"));
}
