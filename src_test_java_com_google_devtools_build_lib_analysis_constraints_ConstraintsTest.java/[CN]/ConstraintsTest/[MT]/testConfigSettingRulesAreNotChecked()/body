{
  new EnvironmentGroupMaker("foo_env").setEnvironments("a","b").setDefaults().make();
  scratch.file("hello/BUILD","config_setting(name = 'setting', values = {'compilation_mode': 'fastbuild'})","sh_library(","    name = 'shlib',","    srcs = select({","        ':setting': ['shlib.sh'],","    }),","    compatible_with = ['//foo_env:a'])");
  assertNotNull(getConfiguredTarget("//hello:shlib"));
  assertNoEvents();
}
