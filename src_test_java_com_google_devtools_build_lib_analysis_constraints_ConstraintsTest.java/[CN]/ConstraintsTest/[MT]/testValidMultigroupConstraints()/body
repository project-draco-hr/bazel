{
  new EnvironmentGroupMaker("foo_env").setEnvironments("a","b","c").setDefaults("a").make();
  new EnvironmentGroupMaker("bar_env").setEnvironments("d","e","f").setDefaults("d").make();
  scratchFile("hello/BUILD",getDependencyRule(constrainedTo("//foo_env:b","//foo_env:c"),compatibleWith("//bar_env:e")),getDependingRule(constrainedTo("//foo_env:c"),compatibleWith("//bar_env:e")));
  assertNotNull(getConfiguredTarget("//hello:main"));
  assertNoEvents();
}
