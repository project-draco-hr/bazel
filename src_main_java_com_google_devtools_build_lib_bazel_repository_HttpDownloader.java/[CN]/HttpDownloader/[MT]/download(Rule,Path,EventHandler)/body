{
  AggregatingAttributeMapper mapper=AggregatingAttributeMapper.of(rule);
  String url=mapper.get("url",Type.STRING);
  String sha256=mapper.get("sha256",Type.STRING);
  String type=mapper.has("type",Type.STRING) ? mapper.get("type",Type.STRING) : "";
  try {
    return new HttpDownloader(eventHandler,url,sha256,outputDirectory,type).download();
  }
 catch (  IOException e) {
    throw new RepositoryFunctionException(new IOException("Error downloading from " + url + " to "+ outputDirectory+ ": "+ e.getMessage()),SkyFunctionException.Transience.TRANSIENT);
  }
}
