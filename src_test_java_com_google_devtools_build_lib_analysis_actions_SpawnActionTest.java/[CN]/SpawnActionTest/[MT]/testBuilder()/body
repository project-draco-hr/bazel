{
  Artifact input=getSourceArtifact("input");
  Artifact output=getBinArtifactWithNoOwner("output");
  Action[] actions=builder().addInput(input).addOutput(output).setExecutable(scratchFile("/bin/xxx").asFragment()).setProgressMessage("Test").build(ActionsTestUtil.NULL_ACTION_OWNER,collectingAnalysisEnvironment,targetConfig);
  collectingAnalysisEnvironment.registerAction(actions);
  SpawnAction action=(SpawnAction)actions[0];
  assertEquals(ActionsTestUtil.NULL_ACTION_OWNER.getLabel(),action.getOwner().getLabel());
  assertSameContents(asList(input),action.getInputs());
  assertSameContents(asList(output),action.getOutputs());
  assertEquals(AbstractAction.DEFAULT_RESOURCE_SET,action.getSpawn().getLocalResources());
  assertSameContents(asList("/bin/xxx"),action.getArguments());
  assertEquals("Test",action.getProgressMessage());
}
