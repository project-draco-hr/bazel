def testFindMessageTypeByName(self):
    msg1 = self.pool.FindMessageTypeByName('google.protobuf.python.internal.Factory1Message')
    self.assertIsInstance(msg1, descriptor.Descriptor)
    self.assertEqual('Factory1Message', msg1.name)
    self.assertEqual('google.protobuf.python.internal.Factory1Message', msg1.full_name)
    self.assertEqual(None, msg1.containing_type)
    nested_msg1 = msg1.nested_types[0]
    self.assertEqual('NestedFactory1Message', nested_msg1.name)
    self.assertEqual(msg1, nested_msg1.containing_type)
    nested_enum1 = msg1.enum_types[0]
    self.assertEqual('NestedFactory1Enum', nested_enum1.name)
    self.assertEqual(msg1, nested_enum1.containing_type)
    self.assertEqual(nested_msg1, msg1.fields_by_name['nested_factory_1_message'].message_type)
    self.assertEqual(nested_enum1, msg1.fields_by_name['nested_factory_1_enum'].enum_type)
    msg2 = self.pool.FindMessageTypeByName('google.protobuf.python.internal.Factory2Message')
    self.assertIsInstance(msg2, descriptor.Descriptor)
    self.assertEqual('Factory2Message', msg2.name)
    self.assertEqual('google.protobuf.python.internal.Factory2Message', msg2.full_name)
    self.assertIsNone(msg2.containing_type)
    nested_msg2 = msg2.nested_types[0]
    self.assertEqual('NestedFactory2Message', nested_msg2.name)
    self.assertEqual(msg2, nested_msg2.containing_type)
    nested_enum2 = msg2.enum_types[0]
    self.assertEqual('NestedFactory2Enum', nested_enum2.name)
    self.assertEqual(msg2, nested_enum2.containing_type)
    self.assertEqual(nested_msg2, msg2.fields_by_name['nested_factory_2_message'].message_type)
    self.assertEqual(nested_enum2, msg2.fields_by_name['nested_factory_2_enum'].enum_type)
    self.assertTrue(msg2.fields_by_name['int_with_default'].has_default_value)
    self.assertEqual(1776, msg2.fields_by_name['int_with_default'].default_value)
    self.assertTrue(msg2.fields_by_name['double_with_default'].has_default_value)
    self.assertEqual(9.99, msg2.fields_by_name['double_with_default'].default_value)
    self.assertTrue(msg2.fields_by_name['string_with_default'].has_default_value)
    self.assertEqual('hello world', msg2.fields_by_name['string_with_default'].default_value)
    self.assertTrue(msg2.fields_by_name['bool_with_default'].has_default_value)
    self.assertFalse(msg2.fields_by_name['bool_with_default'].default_value)
    self.assertTrue(msg2.fields_by_name['enum_with_default'].has_default_value)
    self.assertEqual(1, msg2.fields_by_name['enum_with_default'].default_value)
    msg3 = self.pool.FindMessageTypeByName('google.protobuf.python.internal.Factory2Message.NestedFactory2Message')
    self.assertEqual(nested_msg2, msg3)
    self.assertTrue(msg2.fields_by_name['bytes_with_default'].has_default_value)
    self.assertEqual('a\xfb\x00c', msg2.fields_by_name['bytes_with_default'].default_value)
    self.assertEqual(1, len(msg2.oneofs))
    self.assertEqual(1, len(msg2.oneofs_by_name))
    self.assertEqual(2, len(msg2.oneofs[0].fields))
    for name in ['oneof_int', 'oneof_string']:
        self.assertEqual(msg2.oneofs[0], msg2.fields_by_name[name].containing_oneof)
        self.assertIn(msg2.fields_by_name[name], msg2.oneofs[0].fields)
