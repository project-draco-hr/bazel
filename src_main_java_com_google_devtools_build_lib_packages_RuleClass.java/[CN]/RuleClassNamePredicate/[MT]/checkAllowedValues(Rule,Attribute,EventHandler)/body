{
  if (attribute.checkAllowedValues()) {
    PredicateWithMessage<Object> allowedValues=attribute.getAllowedValues();
    Iterable<?> values=AggregatingAttributeMapper.of(rule).visitAttribute(attribute.getName(),attribute.getType());
    for (    Object value : values) {
      if (!allowedValues.apply(value)) {
        rule.reportError(String.format(rule.getLabel() + ": invalid value in '%s' attribute: %s",attribute.getName(),allowedValues.getErrorReason(value)),eventHandler);
      }
    }
  }
}
