{
  syntaxEvents.setFailFast(false);
  List<Statement> statements=parseFileForSkylark(Joiner.on("\n").join("def foo():","  a = 2 not 4","  b = [3, 4]","","d = 4 ada","","def bar():","  a = [3, 4]","  b = 2 + + 5",""));
  assertThat(syntaxEvents.collector()).hasSize(3);
  syntaxEvents.assertContainsEvent("syntax error at 'not': expected newline");
  syntaxEvents.assertContainsEvent("syntax error at 'ada': expected newline");
  syntaxEvents.assertContainsEvent("syntax error at '+': expected expression");
  assertThat(statements).hasSize(3);
}
