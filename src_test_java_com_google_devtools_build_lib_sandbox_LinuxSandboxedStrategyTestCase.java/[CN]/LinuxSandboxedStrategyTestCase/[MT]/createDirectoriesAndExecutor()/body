{
  Path testRoot=createTestRoot();
  workspaceDir=testRoot.getRelative("workspace");
  workspaceDir.createDirectory();
  outputBase=testRoot.getRelative("outputBase");
  outputBase.createDirectory();
  fakeSandboxDir=testRoot.getRelative("sandbox");
  fakeSandboxDir.createDirectory();
  blazeDirs=new BlazeDirectories(outputBase,outputBase,workspaceDir,TestConstants.PRODUCT_NAME);
  BlazeTestUtils.getIntegrationBinTools(blazeDirs);
  OptionsParser optionsParser=OptionsParser.newOptionsParser(ExecutionOptions.class,SandboxOptions.class);
  optionsParser.parse("--verbose_failures","--sandbox_debug");
  EventBus bus=new EventBus();
  this.executor=new BlazeExecutor(blazeDirs.getExecRoot(),blazeDirs.getOutputPath(),reporter,bus,BlazeClock.instance(),optionsParser,true,false,ImmutableList.<ActionContext>of(),ImmutableMap.<String,SpawnActionContext>of("",new LinuxSandboxedStrategy(ImmutableMap.<String,String>of(),blazeDirs,MoreExecutors.newDirectExecutorService(),true,false,ImmutableList.<String>of(),false,TestConstants.PRODUCT_NAME)),ImmutableList.<ActionContextProvider>of());
}
