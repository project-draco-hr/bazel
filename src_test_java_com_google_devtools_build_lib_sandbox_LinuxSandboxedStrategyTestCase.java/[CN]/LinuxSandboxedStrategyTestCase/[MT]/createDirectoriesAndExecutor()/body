{
  Path testRoot=createTestRoot();
  workspaceDir=testRoot.getRelative("workspace");
  workspaceDir.createDirectory();
  outputBase=testRoot.getRelative("outputBase");
  outputBase.createDirectory();
  blazeDirs=new BlazeDirectories(outputBase,outputBase,workspaceDir,"mock-product-name");
  BlazeTestUtils.getIntegrationBinTools(blazeDirs);
  OptionsParser optionsParser=OptionsParser.newOptionsParser(ExecutionOptions.class,SandboxOptions.class);
  EventBus bus=new EventBus();
  this.executor=new BlazeExecutor(blazeDirs.getExecRoot(),blazeDirs.getOutputPath(),reporter,bus,BlazeClock.instance(),optionsParser,true,false,ImmutableList.<ActionContext>of(),ImmutableMap.<String,SpawnActionContext>of("",new LinuxSandboxedStrategy(optionsParser.getOptions(SandboxOptions.class),blazeDirs,MoreExecutors.newDirectExecutorService(),true,false,"mock-product-name")),ImmutableList.<ActionContextProvider>of());
}
