{
  for (  Rule rule : repositoryMap.values()) {
    try {
      addRule(rule);
    }
 catch (    NameConflictException e) {
      throw new IllegalStateException("Got a name conflict for " + rule + ", which can't happen: "+ e.getMessage());
    }
  }
  pkg.bindMap=ImmutableMap.copyOf(bindMap);
  pkg.repositoryMap=ImmutableMap.copyOf(repositoryMap);
  return super.build();
}
