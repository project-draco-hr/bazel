{
  for (  Rule rule : repositoryMap.values()) {
    try {
      addRule(rule);
    }
 catch (    NameConflictException e) {
      throw new IllegalStateException("Got a name conflict for " + rule + ", which can't happen: "+ e.getMessage());
    }
  }
  externalPackage().bindMap=ImmutableMap.copyOf(bindMap);
  externalPackage().repositoryMap=ImmutableMap.copyOf(repositoryMap);
  Package base=super.build();
  return (ExternalPackage)base;
}
