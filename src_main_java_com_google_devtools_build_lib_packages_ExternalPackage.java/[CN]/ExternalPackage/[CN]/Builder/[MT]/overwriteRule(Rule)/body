{
  Preconditions.checkArgument(rule.getOutputFiles().isEmpty());
  Target old=targets.get(rule.getName());
  if (old != null) {
    if (old instanceof Rule) {
      Verify.verify(((Rule)old).getOutputFiles().isEmpty());
    }
    targets.remove(rule.getName());
  }
  addRule(rule);
}
