{
  StoredEventHandler eventHandler=new StoredEventHandler();
  Rule rule=RuleFactory.createAndAddRule(this,ruleClass,kwargs,eventHandler,ast,ast.getLocation());
  addEvents(eventHandler.getEvents());
  repositoryMap.put(RepositoryName.create("@" + rule.getName()),rule);
  return this;
}
