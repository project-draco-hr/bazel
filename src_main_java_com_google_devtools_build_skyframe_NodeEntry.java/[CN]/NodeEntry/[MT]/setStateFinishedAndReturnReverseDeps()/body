{
  ImmutableSet<SkyKey> reverseDepsToSignal=buildingState.getReverseDepsToSignal();
  REVERSE_DEPS_UTIL.consolidateReverseDepsRemovals(this);
  REVERSE_DEPS_UTIL.addReverseDeps(this,reverseDepsToSignal);
  this.directDeps=buildingState.getFinishedDirectDeps().compress();
  buildingState=null;
  if (!keepEdges()) {
    this.directDeps=null;
    this.reverseDeps=null;
  }
  return reverseDepsToSignal;
}
