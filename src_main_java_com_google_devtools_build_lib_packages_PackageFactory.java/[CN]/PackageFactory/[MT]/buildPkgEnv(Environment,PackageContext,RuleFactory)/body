{
  pkgEnv.update("distribs",newDistribsFunction.apply(context));
  pkgEnv.update("glob",newGlobFunction.apply(context,false));
  pkgEnv.update("mocksubinclude",newMockSubincludeFunction.apply(context));
  pkgEnv.update("licenses",newLicensesFunction.apply(context));
  pkgEnv.update("exports_files",newExportsFilesFunction.apply());
  pkgEnv.update("package_group",newPackageGroupFunction.apply());
  pkgEnv.update("package",newPackageFunction(packageArguments));
  pkgEnv.update("environment_group",newEnvironmentGroupFunction.apply(context));
  for (  String ruleClass : ruleFactory.getRuleClassNames()) {
    BaseFunction ruleFunction=newRuleFunction(ruleFactory,ruleClass);
    pkgEnv.update(ruleClass,ruleFunction);
  }
  for (  EnvironmentExtension extension : environmentExtensions) {
    extension.update(pkgEnv,context.pkgBuilder.getBuildFileLabel());
  }
}
