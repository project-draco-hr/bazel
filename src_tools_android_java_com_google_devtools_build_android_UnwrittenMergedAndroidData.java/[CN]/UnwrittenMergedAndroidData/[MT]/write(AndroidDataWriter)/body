{
  try {
    writeParsedAndroidData(primary,mergedDataWriter);
    writeParsedAndroidData(transitive,mergedDataWriter);
    return new MergedAndroidData(mergedDataWriter.resourceDirectory(),mergedDataWriter.assetDirectory(),mergedDataWriter.copyManifest(this.manifest));
  }
  finally {
    mergedDataWriter.flush();
  }
}
