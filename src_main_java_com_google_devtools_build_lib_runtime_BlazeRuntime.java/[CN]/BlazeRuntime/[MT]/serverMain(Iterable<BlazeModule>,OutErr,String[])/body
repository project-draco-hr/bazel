{
  try {
    BlazeServer blazeServer=createBlazeRPCServer(modules,Arrays.asList(args));
    if (blazeServer.grpcServer != null) {
      blazeServer.grpcServer.serve();
    }
    blazeServer.afUnixServer.serve();
    if (blazeServer.grpcServer != null) {
      blazeServer.grpcServer.serve();
    }
    return ExitCode.SUCCESS.getNumericExitCode();
  }
 catch (  OptionsParsingException e) {
    outErr.printErr(e.getMessage());
    return ExitCode.COMMAND_LINE_ERROR.getNumericExitCode();
  }
catch (  IOException e) {
    outErr.printErr("I/O Error: " + e.getMessage());
    return ExitCode.BUILD_FAILURE.getNumericExitCode();
  }
catch (  AbruptExitException e) {
    outErr.printErr(e.getMessage());
    return e.getExitCode().getNumericExitCode();
  }
}
