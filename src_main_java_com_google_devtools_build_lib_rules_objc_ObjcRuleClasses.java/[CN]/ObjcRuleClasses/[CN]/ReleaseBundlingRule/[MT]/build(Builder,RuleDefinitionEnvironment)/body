{
  return builder.add(attr("entitlements",LABEL).legacyAllowAnyFileType()).add(attr("provisioning_profile",LABEL).singleArtifact().allowedFileTypes(FileType.of(".mobileprovision"))).add(attr(":default_provisioning_profile",LABEL).singleArtifact().allowedFileTypes(FileType.of(".mobileprovision")).value(new LateBoundLabel<BuildConfiguration>(ObjcConfiguration.class){
    @Override public Label getDefault(    Rule rule,    BuildConfiguration configuration){
      ObjcConfiguration objcConfiguration=configuration.getFragment(ObjcConfiguration.class);
      if (objcConfiguration.getBundlingPlatform() != Platform.IOS_DEVICE) {
        return null;
      }
      if (rule.isAttributeValueExplicitlySpecified("provisioning_profile")) {
        return null;
      }
      return objcConfiguration.getDefaultProvisioningProfileLabel();
    }
  }
)).add(attr("app_icon",STRING)).add(attr("launch_image",STRING)).add(attr("bundle_id",STRING).value(new Attribute.ComputedDefault(){
    @Override public Object getDefault(    AttributeMap rule){
      return "example." + rule.getName();
    }
  }
)).add(attr("$bundlemerge",LABEL).cfg(HOST).exec().value(env.getLabel(Constants.TOOLS_REPOSITORY + "//tools/objc:bundlemerge"))).add(attr("$environment_plist_sh",LABEL).cfg(HOST).value(env.getLabel(Constants.TOOLS_REPOSITORY + "//tools/objc:environment_plist.sh"))).build();
}
