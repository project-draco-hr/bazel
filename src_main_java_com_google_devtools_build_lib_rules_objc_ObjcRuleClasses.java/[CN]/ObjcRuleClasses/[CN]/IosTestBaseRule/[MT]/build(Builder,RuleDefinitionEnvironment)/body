{
  return builder.add(attr(IosTest.TARGET_DEVICE,LABEL).allowedFileTypes().allowedRuleClasses("ios_device")).add(attr(IosTest.IS_XCTEST,BOOLEAN).value(true)).add(attr(IosTest.XCTEST_APP,LABEL).value(new Attribute.ComputedDefault(IosTest.IS_XCTEST){
    @Override public Object getDefault(    AttributeMap rule){
      return rule.get(IosTest.IS_XCTEST,Type.BOOLEAN) ? env.getLabel("//tools/objc:xctest_app") : null;
    }
  }
).allowedFileTypes().allowedRuleClasses("objc_binary","ios_application")).override(attr("infoplist",LABEL).value(new Attribute.ComputedDefault(IosTest.IS_XCTEST){
    @Override public Object getDefault(    AttributeMap rule){
      return rule.get(IosTest.IS_XCTEST,Type.BOOLEAN) ? env.getLabel("//tools/objc:xctest_infoplist") : null;
    }
  }
).allowedFileTypes(PLIST_TYPE)).build();
}
