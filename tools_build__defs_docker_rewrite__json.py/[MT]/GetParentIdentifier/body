def GetParentIdentifier(f):
    "Try to look at the parent identifier from a docker image.\n\n  The identifier is expected to be in the 'top' file for our rule so we look at\n  it first ('./top', 'top'). If it's not found, then we use the 'repositories'\n  file and tries to parse it to get the first declared repository (so we can\n  actually parse a file generated by 'docker save').\n\n  Args:\n    f: the input tar file.\n  Returns:\n    The identifier of the docker image, or None if no identifier was found.\n  "
    top = utils.GetTarFile(f, 'top')
    if top:
        return top.strip()
    repositories = utils.GetTarFile(f, 'repositories')
    if repositories:
        data = json.loads(repositories)
        for k1 in data:
            for k2 in data[k1]:
                return data[k1][k2].strip()
    return None
