{
  CompilationArtifacts compilationArtifacts=CompilationSupport.compilationArtifacts(ruleContext);
  return new ObjcCommon.Builder(ruleContext).setCompilationAttributes(new CompilationAttributes(ruleContext)).setResourceAttributes(new ResourceAttributes(ruleContext)).addExtraSdkFrameworks(extraSdkFrameworks).addDefines(ruleContext.getTokenizedStringListAttr("defines")).setCompilationArtifacts(compilationArtifacts).addDepObjcProviders(ruleContext.getPrerequisites("deps",Mode.TARGET,ObjcProvider.class)).addDepObjcProviders(ruleContext.getPrerequisites("bundles",Mode.TARGET,ObjcProvider.class)).addNonPropagatedDepObjcProviders(ruleContext.getPrerequisites("non_propagated_deps",Mode.TARGET,ObjcProvider.class)).addDepCcHeaderProviders(ruleContext.getPrerequisites("deps",Mode.TARGET,CppCompilationContext.class)).addDepCcLinkProviders(ruleContext.getPrerequisites("deps",Mode.TARGET)).setIntermediateArtifacts(ObjcRuleClasses.intermediateArtifacts(ruleContext)).setAlwayslink(alwayslink).setHasModuleMap().addDepObjcProviders(extraDepObjcProviders).build();
}
