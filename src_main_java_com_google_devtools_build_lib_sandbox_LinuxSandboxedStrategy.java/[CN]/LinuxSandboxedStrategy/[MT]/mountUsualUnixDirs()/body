{
  MountMap mounts=new MountMap();
  FileSystem fs=blazeDirs.getFileSystem();
  mounts.put(fs.getPath("/bin"),fs.getPath("/bin"));
  mounts.put(fs.getPath("/sbin"),fs.getPath("/sbin"));
  Path resolv=fs.getPath("/etc/resolv.conf");
  if (resolv.exists() && resolv.isSymbolicLink()) {
    mounts.put(resolv,resolv.resolveSymbolicLinks());
    List<Path> resolvList=ImmutableList.of(resolv);
    mounts.putAll(mountDirExclude(fs.getPath("/etc"),resolvList));
  }
 else {
    mounts.put(fs.getPath("/etc"),fs.getPath("/etc"));
  }
  for (  String entry : NativePosixFiles.readdir("/")) {
    if (entry.startsWith("lib")) {
      Path libDir=fs.getRootDirectory().getRelative(entry);
      mounts.put(libDir,libDir);
    }
  }
  for (  String entry : NativePosixFiles.readdir("/usr")) {
    if (!entry.equals("local")) {
      Path usrDir=fs.getPath("/usr").getRelative(entry);
      mounts.put(usrDir,usrDir);
    }
  }
  for (  Path path : mounts.values()) {
    Preconditions.checkArgument(path.exists(),"%s does not exist",path.toString());
  }
  return mounts;
}
