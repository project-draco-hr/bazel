{
  try {
    Map<PathFragment,Path> mounts=new HashMap<>();
    mountRunfilesFromManifests(mounts,spawn);
    mountRunfilesFromSuppliers(mounts,spawn);
    mountFilesFromFilesetManifests(mounts,spawn,executionContext);
    mountInputs(mounts,spawn,executionContext);
    return mounts;
  }
 catch (  IllegalArgumentException|IOException e) {
    throw new EnvironmentalExecException("Could not prepare mounts for sandbox execution",e);
  }
}
