def testSortingRepeatedScalarFieldsCustomComparator(self, message_module):
    'Check some different types with custom comparator.'
    message = message_module.TestAllTypes()
    message.repeated_int32.append((-3))
    message.repeated_int32.append((-2))
    message.repeated_int32.append((-1))
    message.repeated_int32.sort(key=abs)
    self.assertEqual(message.repeated_int32[0], (-1))
    self.assertEqual(message.repeated_int32[1], (-2))
    self.assertEqual(message.repeated_int32[2], (-3))
    message.repeated_string.append('aaa')
    message.repeated_string.append('bb')
    message.repeated_string.append('c')
    message.repeated_string.sort(key=len)
    self.assertEqual(message.repeated_string[0], 'c')
    self.assertEqual(message.repeated_string[1], 'bb')
    self.assertEqual(message.repeated_string[2], 'aaa')
