{
  boolean successfulTransitiveLoading=true;
  for (  Entry<SkyKey,ValueOrException2<NoSuchPackageException,NoSuchTargetException>> entry : env.getValuesOrThrow(depKeys,NoSuchPackageException.class,NoSuchTargetException.class).entrySet()) {
    Label depLabel=(Label)entry.getKey().argument();
    TransitiveTargetValue transitiveTargetValue;
    try {
      transitiveTargetValue=(TransitiveTargetValue)entry.getValue().get();
      if (transitiveTargetValue == null) {
        continue;
      }
    }
 catch (    NoSuchPackageException|NoSuchTargetException e) {
      successfulTransitiveLoading=false;
      transitiveRootCauses.add(depLabel);
      maybeReportErrorAboutMissingEdge(target,depLabel,e,env.getListener());
      continue;
    }
    transitiveSuccessfulPkgs.addTransitive(transitiveTargetValue.getTransitiveSuccessfulPackages());
    transitiveUnsuccessfulPkgs.addTransitive(transitiveTargetValue.getTransitiveUnsuccessfulPackages());
    transitiveTargets.addTransitive(transitiveTargetValue.getTransitiveTargets());
    NestedSet<Label> rootCauses=transitiveTargetValue.getTransitiveRootCauses();
    if (rootCauses != null) {
      successfulTransitiveLoading=false;
      transitiveRootCauses.addTransitive(rootCauses);
      if (transitiveTargetValue.getErrorLoadingTarget() != null) {
        maybeReportErrorAboutMissingEdge(target,depLabel,transitiveTargetValue.getErrorLoadingTarget(),env.getListener());
      }
    }
    NestedSet<Class<? extends BuildConfiguration.Fragment>> depFragments=transitiveTargetValue.getTransitiveConfigFragments();
    Collection<Class<? extends BuildConfiguration.Fragment>> depFragmentsAsCollection=depFragments.toCollection();
    if (!addedConfigFragments.containsAll(depFragmentsAsCollection)) {
      transitiveConfigFragments.addTransitive(depFragments);
      addedConfigFragments.addAll(depFragmentsAsCollection);
    }
  }
  return successfulTransitiveLoading;
}
