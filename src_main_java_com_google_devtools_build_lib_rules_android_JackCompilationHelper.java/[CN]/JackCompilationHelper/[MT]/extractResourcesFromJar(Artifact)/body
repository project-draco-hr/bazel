{
  PathFragment outputPath=FileSystemUtils.replaceExtension(getPartialJackRoot().getRelative(jar.getRootRelativePath()),"-resources.zip");
  Artifact result=ruleContext.getAnalysisEnvironment().getDerivedArtifact(outputPath,ruleContext.getBinOrGenfilesDirectory());
  ruleContext.registerAction(new SpawnAction.Builder().setExecutable(resourceExtractorBinary).addInputArgument(jar).addOutputArgument(result).setProgressMessage("Extracting resources from " + jar.getExecPath().getBaseName()).setMnemonic("AndroidJillResources").build(ruleContext));
  return result;
}
