{
  byte[] name=entry.getName().getBytes(charset);
  byte[] extra=entry.getExtra() != null ? entry.getExtra() : new byte[]{};
  byte[] buf=new byte[FIXED_DATA_SIZE + name.length + extra.length];
  intToLittleEndian(buf,SIGNATURE_OFFSET,SIGNATURE);
  shortToLittleEndian(buf,VERSION_OFFSET,entry.getVersionNeeded());
  shortToLittleEndian(buf,FLAGS_OFFSET,entry.getFlags());
  shortToLittleEndian(buf,METHOD_OFFSET,(short)(entry.getMethod().getValue() & 0xffff));
  intToLittleEndian(buf,MOD_TIME_OFFSET,unixToDosTime(entry.getTime()));
  intToLittleEndian(buf,CRC_OFFSET,(int)(entry.getCrc() & 0xffffffff));
  intToLittleEndian(buf,COMPRESSED_SIZE_OFFSET,(int)(entry.getCompressedSize() & 0xffffffff));
  intToLittleEndian(buf,UNCOMPRESSED_SIZE_OFFSET,(int)(entry.getSize() & 0xffffffff));
  shortToLittleEndian(buf,FILENAME_LENGTH_OFFSET,(short)name.length);
  shortToLittleEndian(buf,EXTRA_FIELD_LENGTH_OFFSET,(short)extra.length);
  System.arraycopy(name,0,buf,FIXED_DATA_SIZE,name.length);
  System.arraycopy(extra,0,buf,FIXED_DATA_SIZE + name.length,extra.length);
  return buf;
}
