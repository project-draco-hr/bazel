{
  long directorySize=0;
  byte[] buf=new byte[CentralDirectoryFileHeader.FIXED_DATA_SIZE];
  for (  ZipFileEntry entry : entries) {
    directorySize+=CentralDirectoryFileHeader.write(entry,charset,buf,stream);
  }
  stream.write(EndOfCentralDirectoryRecord.create(fileOffset,directorySize,entries.size(),fileComment != null ? fileComment : "",charset));
}
