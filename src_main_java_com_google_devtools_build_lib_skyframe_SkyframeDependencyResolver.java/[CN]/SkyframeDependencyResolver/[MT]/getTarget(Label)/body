{
  if (env.getValue(TargetMarkerValue.key(label)) == null) {
    return null;
  }
  SkyKey key=PackageValue.key(label.getPackageIdentifier());
  PackageValue packageValue=(PackageValue)env.getValueOrThrow(key,NoSuchPackageException.class);
  if (packageValue == null) {
    return null;
  }
  Package pkg=packageValue.getPackage();
  if (pkg.containsErrors()) {
    throw new BuildFileContainsErrorsException(label.getPackageIdentifier());
  }
  return packageValue.getPackage().getTarget(label.getName());
}
