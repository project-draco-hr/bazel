{
  if (isVariableReference()) {
    String varName=LetExpression.getNameFromReference(pattern);
    Set<T> value=env.getVariable(varName);
    if (value == null) {
      throw new QueryException(this,"undefined variable '" + varName + "'");
    }
    callback.process(value);
  }
 else {
    callback.process(env.getTargetsMatchingPattern(this,pattern));
  }
}
