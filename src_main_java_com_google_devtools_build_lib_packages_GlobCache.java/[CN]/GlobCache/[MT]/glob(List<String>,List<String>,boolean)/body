{
  for (  String pattern : Iterables.concat(includes,excludes)) {
    getGlobAsync(pattern,excludeDirs);
  }
  LinkedHashSet<String> results=Sets.newLinkedHashSetWithExpectedSize(includes.size());
  for (  String pattern : includes) {
    results.addAll(getGlob(pattern,excludeDirs));
  }
  for (  String pattern : excludes) {
    for (    String excludeMatch : getGlob(pattern,excludeDirs)) {
      results.remove(excludeMatch);
    }
  }
  Preconditions.checkState(!results.contains(null),"glob returned null");
  return new ArrayList<>(results);
}
