{
  Aspect.Builder builder=new Builder(NAME);
  AndroidStudioInfoFilesProvider.Builder providerBuilder=new AndroidStudioInfoFilesProvider.Builder();
  RuleIdeInfo.Kind ruleKind=getRuleKind(ruleContext.getRule(),base);
  NestedSet<Label> directDependencies=processDependencies(base,ruleContext,providerBuilder,ruleKind);
  AndroidStudioInfoFilesProvider provider;
  if (ruleKind != RuleIdeInfo.Kind.UNRECOGNIZED) {
    provider=createIdeBuildArtifact(base,ruleContext,ruleKind,directDependencies,providerBuilder);
  }
 else {
    provider=providerBuilder.build();
  }
  builder.addOutputGroup(IDE_INFO,provider.getIdeInfoFiles()).addOutputGroup(IDE_INFO_TEXT,provider.getIdeInfoTextFiles()).addOutputGroup(IDE_RESOLVE,provider.getIdeResolveFiles()).addProvider(AndroidStudioInfoFilesProvider.class,provider);
  return builder.build();
}
