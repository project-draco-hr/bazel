def testMergeFromExtensionsRepeated(self):
    proto1 = unittest_pb2.TestAllExtensions()
    proto1.Extensions[unittest_pb2.repeated_int32_extension].append(1)
    proto1.Extensions[unittest_pb2.repeated_int32_extension].append(2)
    proto2 = unittest_pb2.TestAllExtensions()
    proto2.Extensions[unittest_pb2.repeated_int32_extension].append(0)
    proto2.MergeFrom(proto1)
    self.assertEqual(3, len(proto2.Extensions[unittest_pb2.repeated_int32_extension]))
    self.assertEqual(0, proto2.Extensions[unittest_pb2.repeated_int32_extension][0])
    self.assertEqual(1, proto2.Extensions[unittest_pb2.repeated_int32_extension][1])
    self.assertEqual(2, proto2.Extensions[unittest_pb2.repeated_int32_extension][2])
