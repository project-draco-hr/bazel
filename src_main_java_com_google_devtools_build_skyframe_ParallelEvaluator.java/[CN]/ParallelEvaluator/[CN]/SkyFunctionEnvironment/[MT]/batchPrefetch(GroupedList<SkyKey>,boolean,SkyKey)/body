{
  Map<SkyKey,NodeEntry> batchMap=graph.getBatch(Iterables.concat(keys));
  if (batchMap.size() != keys.numElements()) {
    throw new IllegalStateException("Missing keys for " + keyForDebugging + ": "+ Sets.difference(keys.toSet(),batchMap.keySet()));
  }
  if (assertDone) {
    for (    Map.Entry<SkyKey,NodeEntry> entry : batchMap.entrySet()) {
      Preconditions.checkState(entry.getValue().isDone(),"%s had not done %s",keyForDebugging,entry);
    }
  }
  return batchMap;
}
