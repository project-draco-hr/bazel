{
  BuildOptions buildOptions=runtime.createBuildOptions(optionsProvider);
  boolean keepGoing=optionsProvider.getOptions(BuildView.Options.class).keepGoing;
  boolean loadingSuccessful=loadForConfigurations(reporter,ImmutableSet.copyOf(buildOptions.getAllLabels().values()),keepGoing);
  if (!loadingSuccessful) {
    throw new InvalidConfigurationException("Configuration creation failed");
  }
  return getSkyframeExecutor().createConfigurations(reporter,runtime.getConfigurationFactory(),buildOptions,getDirectories(),ImmutableSet.<String>of(),keepGoing);
}
