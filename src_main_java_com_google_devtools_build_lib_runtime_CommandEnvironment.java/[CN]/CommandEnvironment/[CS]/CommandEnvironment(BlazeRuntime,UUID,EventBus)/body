{
  this.runtime=runtime;
  this.commandId=commandId;
  this.reporter=new Reporter();
  this.eventBus=eventBus;
  this.blazeModuleEnvironment=new BlazeModuleEnvironment();
  if (USE_SKYFRAME_LOADING_PHASE) {
    this.loadingPhaseRunner=runtime.getSkyframeExecutor().getLoadingPhaseRunner(runtime.getPackageFactory().getRuleClassNames());
  }
 else {
    this.loadingPhaseRunner=new LegacyLoadingPhaseRunner(runtime.getSkyframeExecutor().getPackageManager(),runtime.getPackageFactory().getRuleClassNames());
  }
  this.view=new BuildView(runtime.getDirectories(),runtime.getRuleClassProvider(),runtime.getSkyframeExecutor(),runtime.getCoverageReportActionFactory());
  this.workingDirectory=runtime.getWorkspace();
}
