{
  if (getFileType(rootedPath) == FileType.EXTERNAL_MUTABLE_FILE) {
    if (!errorOnExternalFiles) {
      PrecomputedValue.dependOnBuildId(env);
    }
 else {
      throw new FileOutsidePackageRootsException(rootedPath);
    }
  }
 else   if (getFileType(rootedPath) == FileType.EXTERNAL_IMMUTABLE_FILE) {
    Preconditions.checkNotNull(env.getValue(PackageValue.key(ExternalPackage.PACKAGE_IDENTIFIER)));
  }
}
