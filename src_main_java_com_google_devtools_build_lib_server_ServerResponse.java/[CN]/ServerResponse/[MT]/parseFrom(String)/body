{
  if (input.charAt(input.length() - 1) != '\n') {
    String msg="Response must end with newline (" + input + ")";
    throw new IllegalArgumentException(msg);
  }
  int newlineAt=input.lastIndexOf('\n',input.length() - 2);
  final String exitStatusString;
  final String errorMessage;
  if (newlineAt == -1) {
    errorMessage="";
    exitStatusString=input.substring(0,input.length() - 1);
  }
 else {
    errorMessage=input.substring(0,newlineAt);
    exitStatusString=input.substring(newlineAt + 1,input.length() - 1);
  }
  return new ServerResponse(errorMessage,Integer.parseInt(exitStatusString));
}
