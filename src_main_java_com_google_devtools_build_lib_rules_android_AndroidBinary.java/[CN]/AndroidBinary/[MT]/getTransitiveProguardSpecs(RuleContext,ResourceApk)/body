{
  JavaOptimizationMode optMode=getJavaOptimizationMode(ruleContext);
  if (optMode == JavaOptimizationMode.NOOP) {
    return ImmutableList.of();
  }
  ImmutableList<Artifact> proguardSpecs=ruleContext.getPrerequisiteArtifacts(PROGUARD_SPECS,Mode.TARGET).list();
  if (optMode == JavaOptimizationMode.LEGACY && proguardSpecs.isEmpty()) {
    return ImmutableList.of();
  }
  ImmutableSortedSet.Builder<Artifact> builder=ImmutableSortedSet.<Artifact>orderedBy(Artifact.EXEC_PATH_COMPARATOR).addAll(proguardSpecs);
  for (  ProguardSpecProvider dep : ruleContext.getPrerequisites("deps",Mode.TARGET,ProguardSpecProvider.class)) {
    builder.addAll(dep.getTransitiveProguardSpecs());
  }
  Artifact output=resourceApk.getResourceProguardConfig();
  builder.add(output);
  return builder.build().asList();
}
