{
  this.eventHandler=new ErrorSensingEventHandler(eventHandler);
  this.targetProvider=packageProvider;
  this.targetPatternEvaluator=targetPatternEvaluator;
  this.errorObserver=new ErrorPrintingTargetEdgeErrorObserver(this.eventHandler);
  this.keepGoing=keepGoing;
  this.strictScope=strictScope;
  this.loadingPhaseThreads=loadingPhaseThreads;
  this.dependencyFilter=constructDependencyFilter(settings);
  this.labelVisitor=new LabelVisitor(packageProvider,dependencyFilter);
  this.labelFilter=labelFilter;
  this.settings=Sets.immutableEnumSet(settings);
  this.extraFunctions=ImmutableList.copyOf(extraFunctions);
}
