{
  valuesToDelete.addAll(Maps.filterEntries(graph.getAllValues(),new Predicate<Entry<SkyKey,NodeEntry>>(){
    @Override public boolean apply(    Entry<SkyKey,NodeEntry> input){
      return input.getValue().isDirty() || deletePredicate.apply(input.getKey());
    }
  }
).keySet());
}
