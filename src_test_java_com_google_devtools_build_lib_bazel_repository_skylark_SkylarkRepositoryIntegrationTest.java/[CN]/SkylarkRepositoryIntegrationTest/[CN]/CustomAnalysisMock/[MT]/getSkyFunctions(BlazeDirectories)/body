{
  RepositoryFunction localRepositoryFunction=new LocalRepositoryFunction();
  localRepositoryFunction.setDirectories(directories);
  RepositoryFunction skylarkRepositoryFunction=new SkylarkRepositoryFunction();
  skylarkRepositoryFunction.setDirectories(directories);
  ImmutableMap<String,RepositoryFunction> repositoryHandlers=ImmutableMap.of(LocalRepositoryRule.NAME,localRepositoryFunction);
  return ImmutableMap.of(SkyFunctions.REPOSITORY_DIRECTORY,new RepositoryDelegatorFunction(directories,repositoryHandlers,skylarkRepositoryFunction,new AtomicBoolean(true)),SkyFunctions.REPOSITORY,new RepositoryLoaderFunction());
}
