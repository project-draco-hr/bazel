{
  Build.Rule.Builder builder=Build.Rule.newBuilder();
  builder.setName(rule.getLabel().getName());
  builder.setRuleClass(rule.getRuleClass());
  builder.setPublicByDefault(rule.getRuleClassObject().isPublicByDefault());
  for (  Attribute attribute : rule.getAttributes()) {
    builder.addAttribute(AttributeSerializer.getAttributeProto(attribute,AttributeSerializer.getAttributeValues(rule,attribute),rule.isAttributeValueExplicitlySpecified(attribute),true));
  }
  env.maybeSerializeAdditionalDataForRule(rule,builder);
  return Build.Target.newBuilder().setType(Build.Target.Discriminator.RULE).setRule(builder.build()).build();
}
