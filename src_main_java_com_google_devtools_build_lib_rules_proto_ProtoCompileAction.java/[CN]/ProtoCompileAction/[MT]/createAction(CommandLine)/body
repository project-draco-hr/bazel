{
  SpawnAction.Builder builder=new SpawnAction.Builder().addTransitiveInputs(supportData.getTransitiveImports());
  if (supportData.getUsedDirectDeps() != null) {
    builder.addInput(supportData.getUsedDirectDeps());
  }
  if (langPluginTarget != null) {
    builder.addTool(langPluginTarget);
  }
  builder.addOutputs(outputs).setResources(GENPROTO_RESOURCE_SET).useDefaultShellEnvironment().setExecutable(compilerTarget).setCommandLine(commandLine).setProgressMessage("Generating " + language + " proto_library "+ ruleContext.getLabel()).setMnemonic(MNEMONIC);
  return builder;
}
