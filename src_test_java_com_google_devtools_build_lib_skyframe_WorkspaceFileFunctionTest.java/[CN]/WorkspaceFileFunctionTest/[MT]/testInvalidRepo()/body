{
  RootedPath workspacePath=createWorkspaceFile("workspace(name = 'foo$')");
  PackageValue value=(PackageValue)skyFunc.compute(PackageValue.workspaceKey(workspacePath),getEnv());
  Package pkg=value.getPackage();
  assertTrue(pkg.containsErrors());
  MoreAsserts.assertContainsEvent(pkg.getEvents(),"target names may not contain '$'");
}
