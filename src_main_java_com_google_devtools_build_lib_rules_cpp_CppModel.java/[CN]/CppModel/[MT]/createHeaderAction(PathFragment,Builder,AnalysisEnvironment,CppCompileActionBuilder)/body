{
  builder.setOutputFile(ruleContext.getRelatedArtifact(outputName,".h.processed")).setDotdFile(outputName,".h.d").setPicMode(this.getGeneratePicActions());
  setupBuildVariables(builder,this.getGeneratePicActions(),null);
  semantics.finalizeCompileActionBuilder(ruleContext,builder);
  CppCompileAction compileAction=builder.build();
  env.registerAction(compileAction);
  Artifact tokenFile=compileAction.getOutputFile();
  result.addHeaderTokenFile(tokenFile);
}
