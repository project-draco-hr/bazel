{
  ObjcConfiguration objcConfiguration=ObjcRuleClasses.objcConfiguration(ruleContext);
  Platform platform=null;
  for (  String architecture : objcConfiguration.getIosMultiCpus()) {
    if (platform == null) {
      platform=Platform.forArch(architecture);
    }
 else     if (platform != Platform.forArch(architecture)) {
      ruleContext.ruleError(String.format("In builds which require bundling, --ios_multi_cpus does not currently " + "allow values for both simulator and device builds. Flag was %s",objcConfiguration.getIosMultiCpus()));
    }
  }
}
