{
  AppleConfiguration appleConfiguration=ruleContext.getFragment(AppleConfiguration.class);
  CustomCommandLine.Builder commandLine=CustomCommandLine.builder().addPath(zipOutput.getExecPath()).add("--platform").add(appleConfiguration.getBundlingPlatform().getLowerCaseNameInPlist()).addExecPath("--output-partial-info-plist",partialInfoPlist).add("--minimum-deployment-target").add(bundling.getMinimumOsVersion());
  for (  TargetDeviceFamily targetDeviceFamily : attributes.families()) {
    commandLine.add("--target-device").add(targetDeviceFamily.name().toLowerCase(Locale.US));
  }
  return commandLine.add(PathFragment.safePathStrings(provider.get(XCASSETS_DIR))).add(extraActoolArgs).build();
}
