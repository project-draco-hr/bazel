{
synchronized (path) {
    int oldMode=stat(path,true).getPermissions();
    int newMode=add ? (oldMode | permissionBits) : (oldMode & ~permissionBits);
    FilesystemUtils.chmod(path.toString(),newMode);
  }
}
