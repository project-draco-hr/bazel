{
  SymlinkImplementation strategy=computeSymlinkImplementation(linkPath,targetFragment);
switch (strategy) {
case HARDLINK:
    NativePosixFiles.link(targetFragment.toString(),linkPath.toString());
  break;
case JUNCTION:
case SYMLINK:
synchronized (linkPath) {
  NativePosixFiles.symlink(targetFragment.toString(),linkPath.toString());
}
break;
case FAIL:
if (symlinkLogFile == null) {
throw new IOException(String.format("Symlink emulation failed for symlink: %s -> %s",linkPath,targetFragment));
}
}
}
