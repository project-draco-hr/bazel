{
synchronized (symlinkLogFile) {
    Exception e=new Exception();
    e.fillInStackTrace();
    StringWriter sw=new StringWriter();
    e.printStackTrace(new PrintWriter(sw));
    String msg=String.format("ILLEGAL (%s): %s -> %s\nStack:\n%s",reason,linkPath.getPathString(),targetFragment.getPathString(),sw.toString());
    try (FileChannel channel=new RandomAccessFile(symlinkLogFile,"rwd").getChannel()){
      try (FileLock lock=channel.lock()){
        channel.position(channel.size());
        ByteBuffer data=Charset.forName("UTF-8").newEncoder().encode(CharBuffer.wrap(msg));
        channel.write(data);
      }
     }
   }
}
