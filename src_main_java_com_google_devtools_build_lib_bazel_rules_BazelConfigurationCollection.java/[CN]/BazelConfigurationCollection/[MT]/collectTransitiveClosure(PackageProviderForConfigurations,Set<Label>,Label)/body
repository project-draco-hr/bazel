{
  if (!reachableLabels.add(from)) {
    return;
  }
  Target fromTarget=packageProvider.getTarget(from);
  if (fromTarget instanceof Rule) {
    Rule rule=(Rule)fromTarget;
    if (rule.getRuleClassObject().hasAttr("srcs",BuildType.LABEL_LIST)) {
      for (      List<Label> labelsForConfiguration : AggregatingAttributeMapper.of(rule).visitAttribute("srcs",BuildType.LABEL_LIST)) {
        for (        Label label : labelsForConfiguration) {
          collectTransitiveClosure(packageProvider,reachableLabels,from.resolveRepositoryRelative(label));
        }
      }
    }
    if (rule.getRuleClass().equals("bind")) {
      Label actual=AggregatingAttributeMapper.of(rule).get("actual",BuildType.LABEL);
      if (actual != null) {
        collectTransitiveClosure(packageProvider,reachableLabels,actual);
      }
    }
  }
}
