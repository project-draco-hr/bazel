{
  PathFragment objcFileRootRelativePath=ruleContext.getUniqueDirectory("_j2objc");
  PathFragment objcFileRootExecPath=ruleContext.getConfiguration().getBinFragment().getRelative(objcFileRootRelativePath);
  Iterable<Artifact> objcSrcs=getOutputObjcFiles(ruleContext,javaInputSourceFiles,objcFileRootRelativePath,".m");
  Iterable<Artifact> objcHdrs=getOutputObjcFiles(ruleContext,javaInputSourceFiles,objcFileRootRelativePath,".h");
  Iterable<PathFragment> headerSearchPaths=J2ObjcLibrary.j2objcSourceHeaderSearchPaths(ruleContext,objcFileRootExecPath,javaInputSourceFiles);
  return new J2ObjcSource(ruleContext.getRule().getLabel(),objcSrcs,objcHdrs,objcFileRootExecPath,SourceType.JAVA,headerSearchPaths);
}
