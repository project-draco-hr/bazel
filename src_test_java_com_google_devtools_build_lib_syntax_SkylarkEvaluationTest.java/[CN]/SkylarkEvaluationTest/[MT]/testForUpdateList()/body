{
  new SkylarkTest().setUp("def foo():","  xs = ['a', 'b', 'c']","  s = ''","  for x in xs:","    s = s + x","    if x == 'a':","      xs.pop(0)","      xs.pop(1)","    elif x == 'c':","      xs.append('d')","  return s","s = foo()").testLookup("s","abc");
}
