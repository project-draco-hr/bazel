{
  int shiftedPermissions=permissions >>> 16;
  if (shiftedPermissions != 0) {
    return shiftedPermissions;
  }
  if (path.endsWith("/")) {
    return 040755;
  }
 else   if (permissions == 0) {
    return 010644;
  }
  throw new IOException("Unrecognized file mode for " + path + ": 0x"+ Integer.toHexString(permissions));
}
