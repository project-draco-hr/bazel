def FindHeaderFiles(directory, filter_func):
    'Recurses through directory and returns a list of paths to all the header files that pass filter_func.'
    hfiles = []
    for (path, dirnames, filenames) in os.walk(directory):
        for filename in filenames:
            if (not filename.endswith('.h')):
                continue
            if (not filter_func(filename, False)):
                continue
            hfiles.append(os.path.join(path, filename))
    return hfiles
