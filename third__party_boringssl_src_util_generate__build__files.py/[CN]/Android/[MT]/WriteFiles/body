def WriteFiles(self, files, asm_outputs):
    with open('sources.mk', 'w+') as makefile:
        makefile.write(self.header)
        files['crypto'].extend(self.ExtraFiles())
        self.PrintVariableSection(makefile, 'crypto_sources', files['crypto'])
        self.PrintVariableSection(makefile, 'ssl_sources', files['ssl'])
        self.PrintVariableSection(makefile, 'tool_sources', files['tool'])
        for ((osname, arch), asm_files) in asm_outputs:
            self.PrintVariableSection(makefile, ('%s_%s_sources' % (osname, arch)), asm_files)
