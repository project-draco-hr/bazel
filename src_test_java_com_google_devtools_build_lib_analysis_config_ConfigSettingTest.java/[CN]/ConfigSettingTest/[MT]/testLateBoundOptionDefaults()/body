{
  String crosstoolCpuDefault=(String)getTargetConfiguration().getOptionValue("cpu");
  String crosstoolCompilerDefault=(String)getTargetConfiguration().getOptionValue("compiler");
  String crosstoolLibcDefault=(String)getTargetConfiguration().getOptionValue("glibc");
  scratch.file("test/BUILD","config_setting(","    name = 'match',","    values = {","        'cpu': '" + crosstoolCpuDefault + "',","        'compiler': '" + crosstoolCompilerDefault + "',","        'glibc': '" + crosstoolLibcDefault + "',","    })");
  assertTrue(getConfigMatchingProvider("//test:match").matches());
  assertNull(flagDefault("cpu"));
  assertNotNull(crosstoolCpuDefault);
  assertNull(flagDefault("compiler"));
  assertNotNull(crosstoolCompilerDefault);
  assertNull(flagDefault("glibc"));
  assertNotNull(crosstoolLibcDefault);
}
