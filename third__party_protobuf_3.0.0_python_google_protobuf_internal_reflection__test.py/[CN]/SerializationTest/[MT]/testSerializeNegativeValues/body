def testSerializeNegativeValues(self):
    first_proto = unittest_pb2.TestAllTypes()
    first_proto.optional_int32 = (-1)
    first_proto.optional_int64 = (- (2 << 40))
    first_proto.optional_sint32 = (-3)
    first_proto.optional_sint64 = (- (4 << 40))
    first_proto.optional_sfixed32 = (-5)
    first_proto.optional_sfixed64 = (- (6 << 40))
    second_proto = unittest_pb2.TestAllTypes.FromString(first_proto.SerializeToString())
    self.assertEqual(first_proto, second_proto)
