def testPackedRepeatedScalars(self):
    self.assertEqual(0, self.packed_proto.ByteSize())
    self.packed_proto.packed_int32.append(10)
    self.packed_proto.packed_int32.append(128)
    int_size = ((1 + 2) + 3)
    self.assertEqual(int_size, self.packed_proto.ByteSize())
    self.packed_proto.packed_double.append(4.2)
    self.packed_proto.packed_double.append(3.25)
    double_size = ((8 + 8) + 3)
    self.assertEqual((int_size + double_size), self.packed_proto.ByteSize())
    self.packed_proto.ClearField('packed_int32')
    self.assertEqual(double_size, self.packed_proto.ByteSize())
