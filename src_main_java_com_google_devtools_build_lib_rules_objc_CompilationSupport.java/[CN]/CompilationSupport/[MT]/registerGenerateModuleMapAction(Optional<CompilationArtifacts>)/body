{
  Iterable<Artifact> publicHeaders=attributes.hdrs();
  Iterable<Artifact> privateHeaders=ImmutableList.<Artifact>of();
  if (compilationArtifacts.isPresent()) {
    CompilationArtifacts artifacts=compilationArtifacts.get();
    publicHeaders=Iterables.concat(publicHeaders,artifacts.getAdditionalHdrs());
    privateHeaders=Iterables.concat(privateHeaders,artifacts.getPrivateHdrs());
  }
  return registerGenerateModuleMapAction(ObjcRuleClasses.intermediateArtifacts(ruleContext).moduleMap(),publicHeaders,privateHeaders,attributes.directDepModuleMaps());
}
