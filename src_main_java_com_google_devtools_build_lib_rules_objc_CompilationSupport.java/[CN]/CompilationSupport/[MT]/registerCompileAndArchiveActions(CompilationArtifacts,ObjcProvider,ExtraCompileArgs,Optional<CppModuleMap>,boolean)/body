{
  ImmutableList.Builder<Artifact> objFiles=new ImmutableList.Builder<>();
  for (  Artifact sourceFile : compilationArtifacts.getSrcs()) {
    Artifact objFile=intermediateArtifacts.objFile(sourceFile);
    objFiles.add(objFile);
    if (ObjcRuleClasses.SWIFT_SOURCES.matches(sourceFile.getFilename())) {
      registerSwiftCompileAction(sourceFile,objFile,objcProvider);
    }
 else {
      registerCompileAction(sourceFile,objFile,objcProvider,moduleMap,compilationArtifacts,Iterables.concat(extraCompileArgs,ImmutableList.of("-fobjc-arc")),isCodeCoverageEnabled);
    }
  }
  for (  Artifact nonArcSourceFile : compilationArtifacts.getNonArcSrcs()) {
    Artifact objFile=intermediateArtifacts.objFile(nonArcSourceFile);
    objFiles.add(objFile);
    registerCompileAction(nonArcSourceFile,objFile,objcProvider,moduleMap,compilationArtifacts,Iterables.concat(extraCompileArgs,ImmutableList.of("-fno-objc-arc")),isCodeCoverageEnabled);
  }
  objFiles.addAll(compilationArtifacts.getPrecompiledSrcs());
  if (compilationArtifacts.hasSwiftSources()) {
    registerSwiftModuleMergeAction(compilationArtifacts,objcProvider);
  }
  for (  Artifact archive : compilationArtifacts.getArchive().asSet()) {
    registerArchiveActions(objFiles,archive);
  }
}
