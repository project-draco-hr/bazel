{
  SkyKey topKey=GraphTester.toSkyKey("top");
  tester.set(topKey,new StringValue("top")).setWarning("warning msg").setHasError(true);
  for (int i=0; i < 2; i++) {
    initializeReporter();
    EvaluationResult<StringValue> result=tester.eval(false,"top");
    assertTrue(result.hasError());
    assertThat(result.getError(topKey).getRootCauses()).containsExactly(topKey);
    assertEquals(topKey.toString(),result.getError(topKey).getException().getMessage());
    assertTrue(result.getError(topKey).getException() instanceof SomeErrorException);
    JunitTestUtils.assertContainsEvent(eventCollector,"warning msg");
    JunitTestUtils.assertEventCount(1,eventCollector);
  }
}
