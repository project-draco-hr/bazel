{
  FileStatus baseStat=syscalls.statNullable(base,Symlinks.FOLLOW);
  if (baseStat == null || patterns.isEmpty()) {
    return Futures.immediateFuture(Collections.<Path>emptyList());
  }
  List<String[]> splitPatterns=checkAndSplitPatterns(patterns);
  List<String[]> splitExcludes=checkAndSplitPatterns(excludePatterns);
  pendingOps.incrementAndGet();
  try {
    for (    String[] splitPattern : splitPatterns) {
      queueGlob(base,baseStat.isDirectory(),splitPattern,0,excludeDirectories,splitExcludes,0,results,cache,dirPred,syscalls);
    }
  }
  finally {
    decrementAndCheckDone();
  }
  return result;
}
